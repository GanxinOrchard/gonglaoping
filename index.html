<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>æŸ‘å¿ƒæœåœ’ï½œå…¬è€åªæ¤ªæŸ‘ãƒ»æ±å‹¢èŒ‚è°·ï½œåœ¨åœ°å‚³æ‰¿çš„å¥½æ»‹å‘³</title>
<meta name="description" content="æŸ‘å¿ƒæœåœ’ï¼šç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´ã€‚å…¬è€åªå±±é ‚åœ¨åœ°50å¹´æ¤ªæŸ‘ã€æ±å‹¢åœ¨åœ°30å¹´èŒ‚è°·ã€‚ç¾æ¡åˆ†ç´šç›´é€ï¼Œ10/25å°æ–¤å¤šè¦æ ¼ï¼ŒåŒ¯æ¬¾ç«‹å³å®‰æ’å‡ºè²¨ã€‚åˆ°è²¨è«‹é–‹ç®±éŒ„å½±ä¿éšœç†è³ ã€‚">
<style>
  :root{
    --bg:#faf7f2; --surface:#ffffff; --text:#1f2937; --muted:#6b7280; --brand:#f59e0b; --brand-dark:#d97706;
    --border:#e5e7eb; --shadow:0 10px 28px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth; -webkit-text-size-adjust:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","Helvetica Neue",Arial,sans-serif}
  a{color:var(--brand-dark);text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:0 16px}

  /* Hero */
  .hero{position:relative;min-height:52vh;display:grid;place-items:center;color:#fff;background-size:cover;background-position:center}
  @media(max-width:560px){.hero{min-height:44vh}}
  .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.38));z-index:0;pointer-events:none}
  .hero-inner{position:relative;z-index:1;text-align:center;padding:56px 16px}
  .logo{width:110px;height:110px;border-radius:18px;background:#fff9;padding:10px;backdrop-filter:blur(4px);display:inline-grid;place-items:center;margin-bottom:10px}
  .logo img{max-width:100%;max-height:100%}
  .hero h1{font-size:clamp(22px,5vw,38px);margin:4px 0 6px}
  .hero p{font-size:clamp(13px,3.3vw,17px);opacity:.98;margin:0}
  .pill{display:inline-block;background:#fff3;backdrop-filter:blur(4px);border:1px solid #fff7;color:#fff;border-radius:999px;padding:6px 10px;font-weight:700}

  .btn{display:inline-flex;align-items:center;gap:8px;border-radius:12px;padding:10px 14px;background:var(--brand);color:#111;font-weight:700;border:1px solid rgba(0,0,0,.05);box-shadow:0 10px 20px rgba(245,158,11,.25);cursor:pointer;font-size:clamp(13px,3.2vw,15px)}
  .btn:hover{background:var(--brand-dark)}

  .section{padding:40px 0}
  .section h2{font-size:clamp(18px,4.2vw,26px);margin:0 0 10px}
  .muted{color:var(--muted)}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
  .grid{display:grid;gap:16px}
  @media(min-width:900px){.grid-2{grid-template-columns:1fr 1fr}}
  .content{padding:16px}
  .content p{margin:0 0 10px;line-height:1.8;font-size:clamp(14px,3.6vw,16px)}
  .content ul{margin:0;padding-left:1.2em;line-height:1.8}
  .content li{margin:4px 0}
  .note{font-size:13px;color:var(--muted)}

  /* åˆ†é¡ç±¤ï¼šå–®æ’æ©«å‘æ»‘å‹• */
  .subnav{position:sticky;top:0;z-index:40;background:var(--surface);border-bottom:1px solid var(--border);box-shadow:0 6px 20px rgba(0,0,0,.04)}
  .subnav .rail{display:flex;gap:8px;align-items:center;padding:10px 4px;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;scroll-snap-type:x proximity}
  .subnav .rail::-webkit-scrollbar{height:6px}
  .subnav .rail::-webkit-scrollbar-thumb{background:#e6e6e6;border-radius:999px}
  .chip{flex:0 0 auto;background:#fef3c7;border:1px solid #fde68a;color:#7c2d12;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer;scroll-snap-align:center;font-size:clamp(13px,3.3vw,14px)}
  .chip:hover{background:#fde68a}

  /* è¦æ ¼æ¯”è¼ƒåœ– */
  .spec-figure{display:flex;justify-content:center;padding:6px 0 0}
  .spec-figure img{max-width:min(860px,92%);height:auto;border-radius:12px;box-shadow:var(--shadow)}

  /* ç”¢å“ç¶²æ ¼ï¼ˆå…©æ¬„ï¼‰ */
  .product-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
  @media(min-width:960px){.product-grid{gap:14px}}
  .product{display:flex;flex-direction:column}
  .product img{width:100%;aspect-ratio:4/3;height:auto;object-fit:cover;border-radius:14px 14px 0 0}
  .product .body{padding:10px 12px}
  .title{margin:0;font-weight:700;font-size:clamp(14px,3.8vw,16px);line-height:1.35;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:2.7em}
  .price{font-weight:800;font-size:clamp(16px,4.2vw,18px)}
  .row-between{display:flex;align-items:center;justify-content:space-between}
  .tag-hot{display:inline-block;background:#22c55e;color:#053;border:1px solid #16a34a;border-radius:10px;padding:2px 6px;font-size:12px;font-weight:800}
  @media(max-width:360px){
    .product-grid{gap:10px}
  }

  /* æŠ½å±œè³¼ç‰©è»Š */
  .drawer{position:fixed;right:0;top:0;bottom:0;width:min(420px,96%);background:var(--surface);border-left:1px solid var(--border);
    transform:translateX(105%);transition:.28s;z-index:50;display:flex;flex-direction:column}
  .drawer.open{transform:none}
  .drawer header{padding:12px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
  .drawer main{padding:12px 14px;overflow:auto;flex:1}
  .line{height:1px;background:var(--border);margin:10px 0}
  .cart-row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:8px 0}
  .qty{display:flex;align-items:center;border:1px solid var(--border);border-radius:10px}
  .qty button{width:30px;height:30px;border:0;background:#f3f4f6}
  .qty span{display:inline-block;width:32px;text-align:center}
  .summary{background:#f9fafb;border:1px dashed var(--border);border-radius:12px;padding:12px}
  .badge{display:inline-block;background:#fff0d6;color:#7c2d12;border:1px solid #fed7aa;border-radius:10px;padding:4px 8px;font-size:12px;font-weight:700}

  /* è¡¨å–®ï¼ˆé¿å… iOS æ”¾å¤§ï¼‰ */
  .form .row{display:grid;gap:10px}
  @media(min-width:720px){.form .row{grid-template-columns:1fr 1fr}}
  .label{font-weight:700;margin:8px 0 6px}
  .input, select, textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;background:#fff;font-size:16px}
  input, select, textarea{touch-action:manipulation}

  /* è­¦ç¤ºå¡ç‰‡ */
  .warn{background:#fff1f2;border:1px solid #fecdd3;color:#7f1d1d}

  /* æµ®å‹•è³¼ç‰©è»ŠæŒ‰éˆ• */
  .fab{position:fixed;right:16px;bottom:calc(16px + env(safe-area-inset-bottom));z-index:60;background:var(--brand);color:#111;border:1px solid rgba(0,0,0,.06);
    padding:12px 16px;border-radius:999px;box-shadow:0 10px 18px rgba(245,158,11,.35);display:flex;align-items:center;gap:8px;font-weight:800;cursor:pointer}
  .fab-badge{display:inline-block;min-width:22px;height:22px;border-radius:999px;background:#111;color:#fff;font-size:12px;line-height:22px;text-align:center;padding:0 6px}

  footer{padding:34px 0 56px;color:#6b7280;text-align:center}
</style>
</head>
<body>

<!-- æŠ½å±œè³¼ç‰©è»Š -->
<aside id="drawer" class="drawer" aria-hidden="true">
  <header>
    <strong>è³¼ç‰©è»Š</strong>
    <button class="btn" onclick="toggleDrawer(false)">é—œé–‰</button>
  </header>
  <main>
    <div id="cartList"></div>
    <div class="line"></div>
    <div class="summary">
      <div class="row-between"><span>å•†å“å°è¨ˆ</span><strong id="subtotal">$0</strong></div>
      <div class="row-between"><span>é‹è²»ï¼ˆå¸¸æº«å®…é…ï¼‰</span><strong id="shipping">$0</strong></div>
      <div class="line"></div>
      <div class="row-between" style="font-size:18px"><span>æ‡‰ä»˜é‡‘é¡</span><strong id="total">$0</strong></div>
      <div class="note" style="margin-top:8px">æ»¿é¡ <b id="freeShipText">0</b> å³å…é‹ã€‚</div>
    </div>

    <div class="line"></div>
    <!-- ä¸‹å–®è¡¨å–®ï¼ˆå…¨éƒ¨å¿…å¡«ï¼‰ -->
    <form id="orderForm" class="form" onsubmit="submitOrder(event)">
      <div class="row">
        <div><div class="label">å§“å</div><input class="input" name="name" required></div>
        <div><div class="label">æ‰‹æ©Ÿ</div><input class="input" name="phone" required></div>
      </div>
      <div class="row">
        <div><div class="label">Emailï¼ˆå¯„é€å‡ºè²¨é€šçŸ¥ï¼‰</div><input class="input" type="email" name="email" required></div>
        <div>
          <div class="label">ç‰©æµæ–¹å¼</div>
          <select name="ship" class="input" required>
            <option value="æ–°ç«¹è²¨é‹å¸¸æº«å®…é…">æ–°ç«¹è²¨é‹å¸¸æº«å®…é…</option>
            <option value="è‡ªå–ï¼ˆå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿï¼‰">è‡ªå–ï¼ˆå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿï¼‰</option>
          </select>
        </div>
      </div>
      <div>
        <div class="label">æ”¶ä»¶åœ°å€ï¼ˆè‡ªå–å¯å¡«è‡ªå–åœ°é»ï¼‰</div>
        <input class="input" name="addr" required>
      </div>
      <div>
        <div class="label">å‚™è¨»ï¼ˆåˆ°è²¨æ™‚æ®µã€ç™¼ç¥¨éœ€æ±‚ç­‰ï¼‰</div>
        <textarea class="input" name="remark" rows="3" required></textarea>
      </div>
      <div style="margin:6px 0">
        <label><input type="checkbox" required> æˆ‘å·²è©³é–±ä¸‹æ–¹ã€Œç‰©æµèˆ‡é€€è²¨èªªæ˜ã€ä¸¦åŒæ„</label>
      </div>
      <button class="btn" type="submit" style="width:100%;justify-content:center">é€å‡ºè¨‚å–®ï¼ˆå–å¾—åŒ¯æ¬¾è³‡è¨Šï¼‰</button>
    </form>
    <div id="result" class="note" style="margin-top:8px"></div>
  </main>
</aside>

<!-- æµ®å‹•è³¼ç‰©è»ŠæŒ‰éˆ• -->
<button id="cartFab" class="fab" aria-label="é–‹å•Ÿè³¼ç‰©è»Š" onclick="toggleDrawer(true)">
  ğŸ›’ è³¼ç‰©è»Š <span id="fabCount" class="fab-badge">0</span>
</button>

<!-- Hero -->
<section class="hero" id="hero">
  <div class="hero-inner wrap">
    <div class="logo"><img id="logoImg" src="" alt="æŸ‘å¿ƒæœåœ’ Logo"></div>
    <span class="pill">è±åŸãƒ»æ±å‹¢ï½œåœ¨åœ°å‚³æ‰¿</span>
    <h1>æŸ‘å¿ƒæœåœ’ï½œç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´</h1>
    <p>å…¬è€åªæ¤ªæŸ‘ï¼ˆ50å¹´ï¼‰èˆ‡æ±å‹¢èŒ‚è°·ï¼ˆ30å¹´ï¼‰ï¼Œç¾æ¡åˆ†ç´šç›´é€ã€‚10 / 25 å°æ–¤å¤šè¦æ ¼å¯é¸ï¼ŒåŒ¯æ¬¾å¾Œç«‹å³å®‰æ’å‡ºè²¨ï¼›åˆ°è²¨è«‹é–‹ç®±éŒ„å½±ï¼Œä¿éšœé‹æç†è³ ã€‚</p>
    <div style="margin-top:14px">
      <a id="shopNowBtn" class="btn" href="#hot" onclick="go(event,'hot')">é¦¬ä¸Šé¸è³¼</a>
    </div>
  </div>
</section>

<!-- åˆ†é¡éŒ¨é»ï¼ˆå–®æ’ï¼‰ -->
<nav class="subnav">
  <div class="wrap">
    <div class="rail">
      <button class="chip" onclick="go(event,'hot')">ğŸ”¥ ç†±éŠ·ï¼ˆ25Aï¼‰</button>
      <button class="chip" onclick="go(event,'pongan')">å…¬è€åªæ¤ªæŸ‘</button>
      <button class="chip" onclick="go(event,'maogao')">æ±å‹¢èŒ‚è°·</button>
      <button class="chip" onclick="go(event,'query')">è¨‚å–®æŸ¥è©¢</button>
    </div>
  </div>
</nav>

<!-- å“ç‰Œæ•…äº‹ + å½±ç‰‡ -->
<section class="section">
  <div class="wrap grid grid-2">
    <div class="card content">
      <h2>é—œæ–¼ã€ŒæŸ‘å¿ƒæœåœ’ã€</h2>
      <p>æˆ‘å€‘ç›¸ä¿¡ï¼Œå¥½çš„æ°´æœï¼Œä¾†è‡ªé•·å¹´çš„å …æŒèˆ‡åœŸåœ°çš„å›æ‡‰ã€‚</p>
      <p><b>å…¬è€åªæ¤ªæŸ‘</b>æ‰¿è¼‰è‘—å®¶æ—åœ¨å±±é ‚çš„ <b>50 å¹´</b>è€•ä½œè¨˜æ†¶ï¼šæ—¥ç…§å……è¶³ã€æ—©æ™šæº«å·®å¤§ï¼Œè®“æœçš®è–„ã€æ±æ°´è¶³ã€é…¸ç”œå¹³è¡¡ã€‚</p>
      <p><b>æ±å‹¢èŒ‚è°·</b>å‰‡æ˜¯ä¸€è·¯ç›¸ä¼´çš„ <b>30 å¹´</b>è€å‹ï¼šé¦™æ°£æ¸…ç”œã€çº–ç¶­ç´°ç·»ã€å…¥å£åŒ–é–‹ã€‚</p>
      <p>å¾æ¡æ”¶ã€åˆ†ç´šåˆ°è£ç®±ï¼Œæˆ‘å€‘åšçš„æ¯ä¸€æ­¥åªæœ‰ä¸€å€‹ç›®çš„â€”â€”æŠŠæœ€å¥½åƒçš„æŸ‘æ©˜ï¼Œå®Œå¥½é€åˆ°ä½ æ‰‹ä¸Šã€‚<br><b>ç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´ã€‚</b></p>
    </div>
    <div class="card" style="overflow:hidden">
      <video src="https://raw.githubusercontent.com/s9000721-cloud/gonglaoping/main/780323577.063367.mp4" controls style="width:100%;height:100%;display:block"></video>
    </div>
  </div>
</section>

<!-- ç†±éŠ·ï¼ˆ25Aï¼‰ -->
<section id="hot" class="section">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>ğŸ”¥ ç†±éŠ·æ¨è–¦ï¼ˆ25Aï¼‰</h2>
      <p class="muted" style="margin-top:-6px">å¿«é€Ÿå¸¶ä½ çœ‹æœ€ç†±é–€çš„ 25A è¦æ ¼</p>
    </div>
    <div class="card" style="padding:0 14px 14px">
      <div id="hotGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- ç”¢å“å€ï¼šå…¬è€åªæ¤ªæŸ‘ -->
<section id="pongan" class="section">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>å…¬è€åªæ¤ªæŸ‘ï¼ˆ50å¹´ï¼‰</h2>
      <p class="muted" style="margin-top:-6px">ç¾æ¡åˆ†ç´šï½œçš®è–„å¤šæ±ï½œé…¸ç”œå¹³è¡¡</p>
    </div>
    <div class="spec-figure"><img id="specImg" src="" alt="æ¤ªæŸ‘è¦æ ¼æ¯”è¼ƒ"></div>
    <div class="card" style="padding:0 14px 14px">
      <div id="ponganGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- ç”¢å“å€ï¼šæ±å‹¢èŒ‚è°· -->
<section id="maogao" class="section">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>æ±å‹¢èŒ‚è°·ï¼ˆ30å¹´ï¼‰</h2>
      <p class="muted" style="margin-top:-6px">é¦™æ°£æ¸…ç”œï½œçº–ç¶­ç´°ç·»ï½œå…¥å£åŒ–é–‹</p>
    </div>
    <div class="card" style="padding:0 14px 14px">
      <div id="maogaoGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- è¨‚å–®æŸ¥è©¢ -->
<section id="query" class="section">
  <div class="wrap card content">
    <h2>è¨‚å–®æŸ¥è©¢</h2>
    <form id="queryForm" onsubmit="queryOrder(event)" style="display:flex;gap:10px;flex-wrap:wrap">
      <input class="input" name="orderNo" placeholder="è¼¸å…¥è¨‚å–®ç·¨è™Ÿï¼ˆä¾‹ï¼šK24-20250923-1234ï¼‰" required style="flex:1 1 260px">
      <button class="btn" type="submit">æŸ¥è©¢</button>
    </form>
    <div id="queryResult" class="note" style="margin-top:8px"></div>
  </div>
</section>

<!-- ç‰©æµèˆ‡é€€è²¨èªªæ˜ -->
<section class="section">
  <div class="wrap grid grid-2">
    <div class="card content">
      <h2>ç‰©æµèˆ‡å‡ºè²¨</h2>
      <ul class="muted">
        <li>å…¥å¸³å¾Œ 1â€“3 å€‹å·¥ä½œå¤©å…§å‡ºè²¨ï¼ˆé€±æœ«èˆ‡ç¯€æ…¶é‡å¤§æ™‚é †å»¶ï¼‰ã€‚</li>
        <li>å®…é…ï¼šæ–°ç«¹è²¨é‹ï¼ˆå¸¸æº«ï¼‰ã€‚åˆ°è²¨è«‹ã€Œå…¨ç¨‹é–‹ç®±éŒ„å½±ã€ï¼›è‹¥æœ‰é‹æï¼Œ48 å°æ™‚å…§æä¾›å½±ç‰‡èˆ‡ç…§ç‰‡ï¼Œå”åŠ©å‘ç‰©æµç”³è«‹ç†è³ ã€‚</li>
        <li>è‡ªå–ï¼šå¯æ–¼è±åŸæˆ–å…¬è€åªè‡ªå–ï¼Œè«‹æ–¼å‚™è¨»å¡«å¯«è‡ªå–é»èˆ‡æ™‚é–“ã€‚</li>
      </ul>
      <div class="badge">è²¼å¿ƒæé†’</div>
      <p class="note">æ°´æœå±¬å¤©ç„¶è¾²ç”¢ï¼Œå¤–è§€ã€ç”œåº¦ã€é…¸åº¦æœƒå› æ‰¹æ¬¡æ°£å€™ç•¥æœ‰å·®ç•°ï¼Œå±¬æ­£å¸¸ç¾è±¡ã€‚</p>
    </div>
    <div class="card content warn">
      <h2>é€€è²¨èˆ‡å”®å¾Œèªªæ˜</h2>
      <ul>
        <li>ç”Ÿé®®æ°´æœä¾æ³•ä¸é©ç”¨ 7 æ—¥çŒ¶è±«æœŸã€‚</li>
        <li>è‡ªç„¶æœæ–‘ã€è‰²æ¾¤å·®ç•°ã€ç³–ç“¤èˆ‡ç”œåº¦è½å·®å±¬æ­£å¸¸ç¯„åœï¼Œæ•ä¸é€€æ›ã€‚</li>
        <li>é‹æè«‹æ–¼ 48 å°æ™‚å…§æä¾›ã€Œå®Œæ•´é–‹ç®±éŒ„å½±ï¼‹ç…§ç‰‡ã€ï¼Œæˆ‘å€‘æœƒå”åŠ©å‘ç‰©æµç†è³ ã€‚</li>
      </ul>
    </div>
  </div>
</section>

<!-- åŒ¯æ¬¾è³‡è¨Š -->
<section class="section">
  <div class="wrap card content">
    <h2>åŒ¯æ¬¾è³‡è¨Š</h2>
    <p><strong id="bankName"></strong>ã€€æˆ¶åï¼š<strong id="bankHolder"></strong>ã€€å¸³è™Ÿï¼š<strong id="bankNo"></strong></p>
    <p class="note">åŒ¯æ¬¾å®Œæˆè«‹æ–¼ã€ŒåŒ¯æ¬¾å¾Œäº”ç¢¼ã€å›è¦†ï¼ˆå›ä¿¡æˆ– LINEï¼‰ï¼Œæˆ‘å€‘å°‡ç«‹å³å®‰æ’å‡ºè²¨ã€‚</p>
  </div>
</section>

<footer>
  <div class="wrap">
    <div class="content" style="text-align:center;padding-top:0">
      <div class="muted">Â© æŸ‘å¿ƒæœåœ’ï½œå…¬è€åªæ¤ªæŸ‘ãƒ»æ±å‹¢èŒ‚è°·</div>
      <div class="muted">åœ°å€ï¼šå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿã€€|ã€€é€£çµ¡é›»è©±ï¼š0933-721-978</div>
    </div>
  </div>
</footer>

<script>
/** =========================
 *  è¨­å®š
 *  ========================= */
const CONFIG = {
  PRICES: {
    PONGAN: { "10å°æ–¤": { "23A": 750, "25A": 780, "27A": 820, "30A": 880 },
              "25å°æ–¤": { "23A": 1600,"25A": 1680,"27A": 1780,"30A": 1880 } },
    MAOGAO: { "10å°æ–¤": { "23A": 720, "25A": 760, "27A": 800, "30A": 860 },
              "25å°æ–¤": { "23A": 1500,"25A": 1580,"27A": 1680,"30A": 1780 } }
  },
  SHIPPING: 160,
  FREE_SHIP_THRESHOLD: 1800,
  BANK: { name: "é€£ç·šéŠ€è¡Œ(824)", holder: "å¼µéˆæ³“", no: "11101-37823-13" },
  IMAGES: {
    HERO: toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E5%B0%81%E9%9D%A2%E5%9C%96.png"),
    LOGO: toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E6%9F%91%E5%BF%83%E6%9E%9C%E5%9C%92LOGO.png"),
    SPEC: toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E7%AD%89%E7%B4%9A%E6%AF%94%E8%BC%83%E5%9C%96.jpg"),
    PONGAN: {
      "10å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "25å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg")
    },
    MAOGAO: {
      "10å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "25å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg")
    }
  },
  GAS_ENDPOINT: "https://script.google.com/macros/s/AKfycbxiHcIIDx0kltzTPLdMtbityhaMP63J4GRkO_FkC7lLMxI-bobY0lZ0FOkgGKOGyS53/exec",
  BRAND_TAG: "æŸ‘å¿ƒæœåœ’"
};

// è½‰ raw.githubusercontent
function toRaw(u){ return !u ? u : (u.includes('raw.githubusercontent.com') ? u : u.replace('https://github.com/','https://raw.githubusercontent.com/').replace('/blob/','/')); }

// åŒ¯æ¬¾è³‡è¨Šèˆ‡åœ–ç‰‡
document.getElementById('bankName').textContent   = CONFIG.BANK.name;
document.getElementById('bankHolder').textContent = CONFIG.BANK.holder;
document.getElementById('bankNo').textContent     = CONFIG.BANK.no;
document.getElementById('hero').style.backgroundImage = `url('${CONFIG.IMAGES.HERO}')`;
document.getElementById('logoImg').src = CONFIG.IMAGES.LOGO;
document.getElementById('specImg').src = CONFIG.IMAGES.SPEC;
document.getElementById('freeShipText').textContent = 'NT$ ' + CONFIG.FREE_SHIP_THRESHOLD.toLocaleString();

// å¹³æ»‘æ²å‹•ï¼ˆæ‰£æ‰ subnav é«˜åº¦ï¼‰
function go(e,id){
  if(e) e.preventDefault();
  const el = document.getElementById(id);
  if(!el) return;
  const navH = document.querySelector('.subnav')?.offsetHeight || 0;
  const y = el.getBoundingClientRect().top + window.scrollY - navH - 6;
  window.scrollTo({top:y,behavior:'smooth'});
}

/** ç”¢å“æ¸…å–® */
const PONGAN = [
  { id:"PON10-23A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ23A", weight:"10å°æ–¤", size:"23A" },
  { id:"PON10-25A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ25A", weight:"10å°æ–¤", size:"25A" },
  { id:"PON10-27A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ27A", weight:"10å°æ–¤", size:"27A" },
  { id:"PON10-30A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ30A", weight:"10å°æ–¤", size:"30A" },
  { id:"PON25-23A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ23A", weight:"25å°æ–¤", size:"23A" },
  { id:"PON25-25A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ25A", weight:"25å°æ–¤", size:"25A" },
  { id:"PON25-27A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ27A", weight:"25å°æ–¤", size:"27A" },
  { id:"PON25-30A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ30A", weight:"25å°æ–¤", size:"30A" },
];
const MAOGAO = [
  { id:"MAO10-23A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ23A", weight:"10å°æ–¤", size:"23A" },
  { id:"MAO10-25A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ25A", weight:"10å°æ–¤", size:"25A" },
  { id:"MAO10-27A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ27A", weight:"10å°æ–¤", size:"27A" },
  { id:"MAO10-30A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ30A", weight:"10å°æ–¤", size:"30A" },
  { id:"MAO25-23A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ23A", weight:"25å°æ–¤", size:"23A" },
  { id:"MAO25-25A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ25A", weight:"25å°æ–¤", size:"25A" },
  { id:"MAO25-27A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ27A", weight:"25å°æ–¤", size:"27A" },
  { id:"MAO25-30A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ30A", weight:"25å°æ–¤", size:"30A" },
];

const cart = [];
const priceOf = (section,weight,size)=> CONFIG.PRICES[section]?.[weight]?.[size] ?? 0;
const currency = n => "NT$ "+(n||0).toLocaleString();
const imgFor = (section,weight,size)=> CONFIG.IMAGES[section]?.[`${weight}-${size}`] || 'https://via.placeholder.com/800x600?text=Image';

/* æ¸²æŸ“ç”¢å“å¡ç‰‡ï¼ˆå…©æ¬„ï¼‰ */
function renderGrid(elId, items){
  const el = document.getElementById(elId);
  el.innerHTML = items.map(p=>{
    const price = priceOf(p.section, p.weight, p.size);
    const img = imgFor(p.section, p.weight, p.size);
    const isHot = p.size==='25A';
    return `
      <article class="product card">
        <img src="${img}" alt="${p.title}">
        <div class="body">
          <div class="row-between" style="gap:8px">
            <h3 class="title">${p.title}</h3>
            ${isHot ? '<span class="tag-hot" aria-label="ç†±éŠ·">ğŸ”¥ ç†±éŠ·</span>' : ''}
          </div>
          <div class="row-between" style="margin-top:8px">
            <div class="price">${currency(price)}</div>
            <button class="btn" onclick="addToCart('${p.id}')" aria-label="åŠ å…¥è³¼ç‰©è»Š">è³¼è²·</button>
          </div>
        </div>
      </article>`;
  }).join('');
}

/* ç†±éŠ·ï¼šæ‰€æœ‰ 25A */
const HOT = [...PONGAN, ...MAOGAO].filter(p=>p.size==='25A');

/* åˆå§‹åŒ– */
renderGrid('hotGrid', HOT);
renderGrid('ponganGrid', PONGAN);
renderGrid('maogaoGrid', MAOGAO);

/* è³¼ç‰©è»Š */
function addToCart(pid){
  const src = [...PONGAN, ...MAOGAO].find(x=>x.id===pid);
  if(!src) return;
  const price = priceOf(src.section, src.weight, src.size);
  const existed = cart.find(x=>x.id===pid);
  if(existed) existed.qty++;
  else cart.push({ id:src.id, title:src.title, price, qty:1, weight:src.weight, size:src.size, section:src.section });
  renderCart(); toggleDrawer(true);
}
function mutateQty(i,delta){
  cart[i].qty += delta;
  if(cart[i].qty<=0) cart.splice(i,1);
  renderCart();
}
function calc(){
  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);
  const shipping = subtotal>=CONFIG.FREE_SHIP_THRESHOLD || cart.length===0 ? 0 : CONFIG.SHIPPING;
  return {subtotal, shipping, total: subtotal+shipping};
}
function renderCart(){
  const list = document.getElementById('cartList');
  if(!cart.length){
    list.innerHTML = `<div class="muted">è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œå»æŒ‘å¹¾é¡†æœ€é ‚çš„æ©˜å­å§ ğŸŠ</div>`;
  }else{
    list.innerHTML = cart.map((c,i)=>`
      <div class="cart-row">
        <div>
          <div><strong>${c.title}</strong></div>
          <div class="note">${currency(c.price)} Ã— ${c.qty}</div>
        </div>
        <div class="qty">
          <button aria-label="æ¸›å°‘" onclick="mutateQty(${i},-1)">â€“</button>
          <span>${c.qty}</span>
          <button aria-label="å¢åŠ " onclick="mutateQty(${i},1)">ï¼‹</button>
        </div>
      </div>`).join('');
  }
  const {subtotal,shipping,total} = calc();
  document.getElementById('subtotal').textContent = currency(subtotal);
  document.getElementById('shipping').textContent = currency(shipping);
  document.getElementById('total').textContent = currency(total);
  document.getElementById('fabCount').textContent = cart.reduce((s,i)=>s+i.qty,0);
}
function toggleDrawer(open){ document.getElementById('drawer').classList.toggle('open', !!open); }

/* é€å–®åˆ° GAS */
async function submitOrder(ev){
  ev.preventDefault();
  if(!cart.length){ alert("è³¼ç‰©è»Šæ˜¯ç©ºçš„"); return; }
  const f = new FormData(ev.target);
  for (const key of ['name','phone','email','addr','ship','remark']){
    if(!f.get(key)){ alert('è«‹å®Œæ•´å¡«å¯«è¨‚å–®è³‡æ–™'); return; }
  }
  const payload = {
    ts: new Date().toISOString(),
    name: f.get('name'), phone: f.get('phone'), email: f.get('email'),
    addr: f.get('addr'), ship: f.get('ship'), remark: f.get('remark'),
    items: cart.map(c=>({title:c.title, section:c.section, weight:c.weight, size:c.size, price:c.price, qty:c.qty})),
    summary: calc(),
    brand: CONFIG.BRAND_TAG
  };
  try{
    const r = await fetch(CONFIG.GAS_ENDPOINT, {method:'POST', body: JSON.stringify(payload)});
    const data = await r.json();
    if(data.ok){
      document.getElementById('result').innerHTML =
        `âœ… è¨‚å–®å·²å»ºç«‹ï¼ˆç·¨è™Ÿï¼š<b>${data.order_no}</b>ï¼‰ã€‚<br>
         æˆ‘å€‘å·²æŠŠåŒ¯æ¬¾è³‡è¨Šå¯„è‡³ <b>${payload.email}</b>ï¼Œè«‹æ–¼ 24 å°æ™‚å…§å®ŒæˆåŒ¯æ¬¾ä»¥ä¿ç•™åº«å­˜ã€‚`;
      cart.length = 0; renderCart(); ev.target.reset();
    }else{
      document.getElementById('result').textContent = 'é€å‡ºå¤±æ•—ï¼š'+(data.msg||'æœªçŸ¥éŒ¯èª¤');
    }
  }catch(e){
    document.getElementById('result').textContent = 'é€å‡ºå¤±æ•—ï¼š'+ e.message;
  }
}

/* è¨‚å–®æŸ¥è©¢ï¼ˆHCT æ–°ç«¹è²¨é‹è¿½è¹¤ï¼‰ */
async function queryOrder(ev){
  ev.preventDefault();
  const no = ev.target.orderNo.value.trim();
  if(!no) return;
  const box = document.getElementById('queryResult');
  box.textContent = 'æŸ¥è©¢ä¸­â€¦';
  try{
    const url = CONFIG.GAS_ENDPOINT + '?orderNo=' + encodeURIComponent(no);
    const r = await fetch(url);
    const data = await r.json();
    if(data.ok){
      const s = data.status || 'ï¼ˆæœªæä¾›ç‹€æ…‹ï¼‰';
      const total = data.total ? `ï¼Œé‡‘é¡ ${currency(data.total)}` : '';
      const shipDate = data.shipDate ? `<br>å‡ºè²¨æ—¥æœŸï¼š${data.shipDate}` : '';
      const track = data.trackingNo ? `<br>ç‰©æµå–®è™Ÿï¼š<b>${data.trackingNo}</b>` : '';
      const trackLink = data.trackingNo ? `<br><a href="https://www.hct.com.tw/searchWaybill.aspx?no=${encodeURIComponent(data.trackingNo)}" target="_blank">æ–°ç«¹è²¨é‹æŸ¥è©¢é€£çµ</a>` : '';
      const items = Array.isArray(data.items) ? data.items.map(i=>`${i.title}Ã—${i.qty}`).join('ã€') : '';
      box.innerHTML = `ğŸ“¦ è¨‚å–® <b>${no}</b> ç‹€æ…‹ï¼š<b>${s}</b>${total}${shipDate}${track}${trackLink}${items?`<br>å“é …ï¼š${items}`:''}`;
    }else{
      box.textContent = 'æŸ¥ç„¡æ­¤è¨‚å–®ç·¨è™Ÿ';
    }
  }catch(e){
    box.textContent = 'æŸ¥è©¢å¤±æ•—ï¼š' + e.message + 'ï¼ˆè«‹ç¢ºèª GAS å·²æ”¯æ´ doGet æŸ¥è©¢ï¼‰';
  }
}

/* åˆå§‹è³¼ç‰©è»Š */
renderCart();
</script>
</body>
</html>
