<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>æŸ‘å¿ƒæœåœ’ï½œå…¬è€åªæ¤ªæŸ‘ãƒ»æ±å‹¢èŒ‚è°·ï½œåœ¨åœ°å‚³æ‰¿çš„å¥½æ»‹å‘³</title>
<meta name="description" content="æŸ‘å¿ƒæœåœ’ï¼šç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´ã€‚å…¬è€åªå±±é ‚åœ¨åœ°50å¹´æ¤ªæŸ‘ã€æ±å‹¢åœ¨åœ°30å¹´èŒ‚è°·ã€‚ç¾æ¡åˆ†ç´šç›´é€ï¼Œ10/25 å°æ–¤å¤šè¦æ ¼ï¼ŒåŒ¯æ¬¾ç«‹å³å®‰æ’å‡ºè²¨ã€‚åˆ°è²¨è«‹é–‹ç®±éŒ„å½±ä¿éšœç†è³ ã€‚">
<style>
  :root{
    --bg:#faf7f2; --surface:#ffffff; --text:#1f2937; --muted:#6b7280; --brand:#f59e0b; --brand-dark:#d97706;
    --border:#e5e7eb; --shadow:0 10px 28px rgba(0,0,0,.06);
    --hot:#ef4444; --hot-dark:#dc2626;
    --pongan-surface:#fff7d6; --maogao-surface:#eef9f0;
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth; -webkit-text-size-adjust:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","Helvetica Neue",Arial,sans-serif}
  a{color:var(--brand-dark);text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:0 16px}

  /* Hero */
  .hero{position:relative;min-height:52vh;display:grid;place-items:center;color:#fff;background-size:cover;background-position:center}
  @media(max-width:560px){.hero{min-height:44vh}}
  .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.38));z-index:0;pointer-events:none}
  .hero-inner{position:relative;z-index:1;text-align:center;padding:56px 16px}
  .logo{width:110px;height:110px;border-radius:18px;background:#fff9;padding:10px;backdrop-filter:blur(4px);display:inline-grid;place-items:center;margin-bottom:10px}
  .logo img{max-width:100%;max-height:100%}
  .hero h1{font-size:clamp(21px,4.8vw,36px);margin:4px 0 6px} /* â† å¯æ”¹ï¼šæ‰‹æ©Ÿå­—ç´š */
  .hero p{font-size:clamp(12.5px,3.2vw,15px);opacity:.98;margin:0}
  .pill{display:inline-block;background:#fff3;backdrop-filter:blur(4px);border:1px solid #fff7;color:#fff;border-radius:999px;padding:6px 10px;font-weight:700}

  .btn{display:inline-flex;align-items:center;gap:8px;border-radius:12px;padding:10px 14px;background:var(--brand);color:#111;font-weight:700;border:1px solid rgba(0,0,0,.05);box-shadow:0 10px 20px rgba(245,158,11,.25);cursor:pointer;font-size:clamp(12.5px,3vw,15px)}
  .btn:hover{background:var(--brand-dark)}
  .btn-ghost{background:#f9fafb;border:1px solid var(--border);color:var(--text);box-shadow:none}
  .btn-red{background:var(--hot);color:#fff;border-color:#ef4444;box-shadow:0 10px 20px rgba(239,68,68,.25)}
  .btn-red:hover{background:var(--hot-dark)}
  .btn-block{width:100%;justify-content:center}
  .btn[disabled]{opacity:.6;cursor:not-allowed}

  .section{padding:34px 0}
  .section h2{font-size:clamp(17px,3.8vw,25px);margin:0 0 10px}
  .muted{color:var(--muted)}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
  .grid{display:grid;gap:16px}
  @media(min-width:900px){.grid-2{grid-template-columns:1fr 1fr}}
  .content{padding:16px}
  .content p{margin:0 0 10px;line-height:1.8;font-size:clamp(13.5px,3.2vw,15px)}
  .content ul{margin:0;padding-left:1.2em;line-height:1.8}
  .content li{margin:4px 0}
  .note{font-size:12.5px;color:var(--muted)}

  /* åˆ†é¡ç±¤ï¼šå–®æ’æ©«å‘æ»‘å‹• */
  .subnav{position:sticky;top:0;z-index:40;background:var(--surface);border-bottom:1px solid var(--border);box-shadow:0 6px 20px rgba(0,0,0,.04)}
  .subnav .rail{display:flex;gap:8px;align-items:center;padding:10px 4px;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;scroll-snap-type:x proximity}
  .subnav .rail::-webkit-scrollbar{height:6px}
  .subnav .rail::-webkit-scrollbar-thumb{background:#e6e6e6;border-radius:999px}
  .chip{flex:0 0 auto;background:#fef3c7;border:1px solid #fde68a;color:#7c2d12;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer;scroll-snap-align:center;font-size:clamp(12.5px,3vw,14px)}

  /* æ©«å‘æ»‘å‹•å¡ç‰‡ï¼ˆæ–°è/è¦æ ¼å…±ç”¨ï¼‰ */
  .rail-cards{display:flex;gap:12px;overflow:auto;padding:10px 4px}
  .rail-cards::-webkit-scrollbar{height:6px}
  .rail-cards::-webkit-scrollbar-thumb{background:#e6e6e6;border-radius:999px}
  .rail-cards .card{flex:0 0 auto;width:min(480px,92%)} /* â† å¯æ”¹ï¼šé è¨­å¯¬ */
  .spec-cards .card{width:min(360px,48%)}               /* â† å¯æ”¹ï¼šæ‰‹æ©Ÿçœ‹èµ·ä¾†æ›´å° */
  @media(min-width:900px){.spec-cards .card{width:min(420px,32%)}}

  /* ç”¢å“ç¶²æ ¼ï¼ˆå…©æ¬„ï¼‰ */
  .product-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
  @media(min-width:960px){.product-grid{gap:14px}}
  .product{display:flex;flex-direction:column}
  .img-wrap{position:relative}
  .product img{width:100%;aspect-ratio:4/3;height:auto;object-fit:cover;border-radius:14px 14px 0 0;display:block}
  .img-flag{position:absolute;left:10px;top:10px;z-index:2;border-radius:10px;padding:6px 10px;font-size:12px;font-weight:800;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,.18)}
  .flag-preorder{background:#2563eb}
  .flag-soldout{background:#111111cc}
  .product .body{padding:10px 12px}
  .title{margin:0;font-weight:700;font-size:clamp(12.5px,3.5vw,15px);line-height:1.35;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:2.4em}
  .price{font-weight:800;font-size:clamp(14px,3.8vw,16px)}
  .row-between{display:flex;align-items:center;justify-content:space-between}
  .tag-hot{display:inline-block;background:var(--hot);color:#fff;border:1px solid #ef4444;border-radius:10px;padding:3px 7px;font-size:12px;font-weight:800}

  /* å€å¡Šä¸»é¡Œ */
  .theme-hot .content{background:#fee2e2;border-color:#fecaca}
  .theme-pongan .content{background:var(--pongan-surface);border-color:#fde68a}
  .theme-maogao .content{background:var(--maogao-surface);border-color:#bbf7d0}

  /* æŠ½å±œï¼ˆå…±ç”¨ï¼‰ */
  .drawer{position:fixed;right:0;top:0;bottom:0;width:min(480px,96%);background:var(--surface);border-left:1px solid var(--border);
  transform:translateX(105%);transition:.28s;z-index:60;display:flex;flex-direction:column}
  .drawer.open{transform:none}
  .drawer header{padding:12px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:8px}
  .drawer header .btns{display:flex;gap:8px}
  .drawer main{padding:12px 14px;overflow:auto;flex:1}
  .line{height:1px;background:var(--border);margin:10px 0}

  .cart-row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:8px 0}
  .qty{display:flex;align-items:center;border:1px solid var(--border);border-radius:10px}
  .qty button{width:30px;height:30px;border:0;background:#f3f4f6}
  .qty span{display:inline-block;width:32px;text-align:center}

  .summary{background:#f9fafb;border:1px dashed var(--border);border-radius:12px;padding:12px}
  .badge{display:inline-block;background:#fff0d6;color:#7c2d12;border:1px solid #fed7aa;border-radius:10px;padding:4px 8px;font-size:12px;font-weight:700}
  .warn{background:#fff1f2;border:1px solid #fecdd3;color:#7f1d1d}

  /* è¡¨å–® */
  .form .row{display:grid;gap:10px}
  @media(min-width:720px){.form .row{grid-template-columns:1fr 1fr}}
  .label{font-weight:700;margin:8px 0 6px}
  .input, select, textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;background:#fff;font-size:16px}
  input, select, textarea{touch-action:manipulation}
  .help{font-size:12px;color:#6b7280;margin-top:4px}

  /* æµ®å‹•è³¼ç‰©è»ŠæŒ‰éˆ•ï¼šæ©˜å­æ¨£å¼ */
  .fab{position:fixed;right:16px;bottom:calc(16px + env(safe-area-inset-bottom));z-index:55;background:var(--brand);color:#111;border:1px solid rgba(0,0,0,.06);
  padding:12px 16px;border-radius:999px;box-shadow:0 10px 18px rgba(245,158,11,.35);display:flex;align-items:center;gap:10px;font-weight:800;cursor:pointer}
  .fab .emoji{font-size:20px;line-height:1}
  .fab-badge{display:inline-block;min-width:22px;height:22px;border-radius:999px;background:#111;color:#fff;font-size:12px;line-height:22px;text-align:center;padding:0 6px}
  .fab-badge.bump{animation:bump .4s}
  @keyframes bump{0%{transform:scale(1)}30%{transform:scale(1.25)}100%{transform:scale(1)}}

  /* ä¸èµ·çœ¼çš„ç®¡ç†å“¡æŒ‰éˆ•ï¼ˆå·¦ä¸‹è§’ï¼‰ */
  .admin-btn{position:fixed;left:14px;bottom:calc(16px + env(safe-area-inset-bottom));z-index:56;background:#fff;border:1px solid var(--border);border-radius:999px;box-shadow:var(--shadow);padding:8px 10px;opacity:.5;cursor:pointer}

  /* å³ä¸‹è§’é½’è¼ªï¼ˆåº«å­˜ç·¨è¼¯ï¼‰ */
  .gear{position:fixed;right:16px;bottom:calc(68px + env(safe-area-inset-bottom));z-index:55;background:#fff;border:1px solid var(--border);border-radius:999px;box-shadow:var(--shadow);padding:10px 12px;cursor:pointer}

  /* Toast ï¼ˆåŠ å…¥è³¼ç‰©è»Šæç¤ºï¼‰ */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(90px + env(safe-area-inset-bottom));background:#111;color:#fff;border:1px solid rgba(0,0,0,.2);padding:10px 14px;border-radius:999px;box-shadow:0 10px 20px rgba(0,0,0,.18);opacity:0;pointer-events:none;transition:.28s;z-index:70}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}

  footer{padding:34px 0 56px;color:#6b7280;text-align:center}
</style>
</head>
<body>

<!-- è³¼ç‰©è»ŠæŠ½å±œ -->
<aside id="drawer" class="drawer" aria-hidden="true">
  <header>
    <strong>è³¼ç‰©è»Š</strong>
    <div class="btns">
      <button class="btn-ghost" onclick="clearCart()">æ¸…ç©ºè³¼ç‰©è»Š</button> <!-- â† å¯æ”¹ï¼šæ˜¯å¦é¡¯ç¤º -->
      <button class="btn" onclick="toggleDrawer(false)">é—œé–‰</button>
    </div>
  </header>
  <main>
    <div id="cartList"></div>

    <div class="line"></div>

    <!-- é…é€æ–¹å¼ -->
    <div class="summary" style="margin-bottom:10px">
      <div class="label">é…é€æ–¹å¼</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button id="shipHomeBtn" class="btn" type="button" onclick="setShipMethod('HOME')">å®…é…</button>
        <button id="shipCvsBtn" class="btn-ghost" type="button" onclick="setShipMethod('CVS')">è¶…å•†å–è²¨ï¼ˆå…é‹ï½œé™10æ–¤Ã—1ï¼‰</button>
      </div>
      <div class="help">è¶…å•†å–è²¨é™ã€Œå–®ä¸€ 10 å°æ–¤ Ã— 1 ç®±ã€ï¼Œä¸æ¥å—å¤–å³¶é…é€ã€‚</div>
    </div>

    <!-- é‹è²»èˆ‡ç¸½é¡ -->
    <div class="summary">
      <div class="row-between"><span>å•†å“å°è¨ˆ</span><strong id="subtotal">$0</strong></div>
      <div class="row-between"><span id="shipLabel">é‹è²»ï¼ˆå®…é…ï¼‰</span><strong id="shipping">$0</strong></div>
      <div class="line"></div>
      <div class="row-between" style="font-size:18px"><span>æ‡‰ä»˜é‡‘é¡</span><strong id="total">$0</strong></div>
      <div class="note" style="margin-top:8px">å®…é…æ»¿é¡ <b id="freeShipText">0</b> å…é‹ï¼›è¶…å•†å–è²¨ä¸€å¾‹å…é‹ã€‚</div>
    </div>

    <div class="line"></div>

    <!-- ä¸‹å–®è¡¨å–® -->
    <form id="orderForm" class="form" onsubmit="submitOrder(event)">
      <div class="row">
        <div>
          <div class="label">å§“å</div>
          <input class="input" name="name" placeholder="ä¾‹ï¼šé™³å°æ©˜" required>
        </div>
        <div>
          <div class="label">æ‰‹æ©Ÿ</div>
          <input class="input" name="phone" placeholder="ä¾‹ï¼š0912-345-678" required>
        </div>
      </div>
      <div class="row">
        <div>
          <div class="label">Emailï¼ˆå¯„é€å‡ºè²¨é€šçŸ¥ï¼‰</div>
          <input class="input" type="email" name="email" placeholder="ä¾‹ï¼šorange@example.com" required>
        </div>
        <div>
          <div class="label">ç‰©æµæ–¹å¼</div>
          <select name="ship" class="input" required>
            <option value="å®…é…">å®…é…</option>
            <option value="è¶…å•†å–è²¨">è¶…å•†å–è²¨ï¼ˆå…é‹ï½œé™10æ–¤Ã—1ï¼‰</option>
            <option value="è‡ªå–ï¼ˆå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿï¼‰">è‡ªå–ï¼ˆå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿï¼‰</option>
          </select>
          <div class="help">æ­¤æ¬„æœƒè·Ÿä¸Šæ–¹ã€Œé…é€æ–¹å¼ã€åŒæ­¥ã€‚</div>
        </div>
      </div>

      <!-- åœ°å€ï¼è¶…å•† -->
      <div id="homeFields">
        <div class="label">æ”¶ä»¶åœ°å€ï¼ˆå®…é…å°ˆç”¨ï¼‰</div>
        <input class="input" name="addr" placeholder="ä¾‹ï¼šå°ä¸­å¸‚â—‹â—‹å€â—‹â—‹è·¯ 123 è™Ÿ 5 æ¨“" required>
      </div>

      <div id="cvsFields" style="display:none">
        <div class="row">
          <div>
            <div class="label">è¶…å•†å“ç‰Œï¼ˆ7-11ï¼å…¨å®¶ï¼‰</div>
            <select class="input" name="cvsBrand" onchange="updateCvsLink(); renderCvsList()">
              <option value="7-11">7-11</option>
              <option value="å…¨å®¶">å…¨å®¶</option>
            </select>
            <div class="help">
              <a id="cvsFinderLink" href="https://emap.pcsc.com.tw/" target="_blank">é–‹å•Ÿ 7-11 é–€å¸‚æŸ¥è©¢</a>ã€€
              <button type="button" class="btn-ghost" onclick="pasteCvsFromClipboard()">è²¼ä¸Šå‰ªè²¼ç°¿</button>
              <button type="button" class="btn" style="margin-left:6px" onclick="toggleCvsPicker(true)">é¸æ“‡é–€å¸‚ï¼ˆç«™å…§ï¼‰</button>
              <!-- â†‘ã€æ–°æ‰‹æ•™å­¸ã€‘é»é€™å€‹ä¸æœƒè·³é›¢ç¶²ç«™ï¼Œç›´æ¥ç”¨æœ¬ç«™æ¸…å–®é¸æ“‡ä¸¦å›å¡« -->
            </div>
          </div>
          <div>
            <div class="label">é–€å¸‚åç¨± / åº—è™Ÿ</div>
            <input class="input" name="cvsStore" placeholder="ä¾‹ï¼šè±åŸæˆåŠŸé–€å¸‚ / 123456">
            <div class="help">å¯ä»¥ç”¨ã€Œé¸æ“‡é–€å¸‚ï¼ˆç«™å…§ï¼‰ã€æˆ–ã€Œé–‹å•Ÿå®˜æ–¹æŸ¥è©¢ï¼‹è²¼ä¸Šå‰ªè²¼ç°¿ã€ã€‚</div>
          </div>
        </div>
      </div>

      <div>
        <div class="label">å‚™è¨»ï¼ˆåˆ°è²¨æ™‚æ®µç­‰ï¼‰</div>
        <textarea class="input" name="remark" rows="3" placeholder="ä¾‹ï¼šå¹³æ—¥ 18:00 å¾Œæ”¶ä»¶"></textarea>
      </div>

      <!-- åŒæ„æ¢æ¬¾ï¼ˆå¼·åˆ¶å±•é–‹ï¼‹æ»¾åˆ°åº•ï¼‰ -->
      <div class="line"></div>
      <div class="label">ç‰©æµèˆ‡é€€è²¨èªªæ˜</div>
      <details id="policy" class="card content" style="max-height:220px;overflow:auto">
        <summary style="cursor:pointer"><b>è«‹å±•é–‹é–±è®€ï¼ˆéœ€æ²åˆ°æœ€åº•æ‰å¯å‹¾é¸åŒæ„ï¼‰</b></summary>
        <div class="content" style="padding-top:10px">
          <ul>
            <li>å…¥å¸³å¾Œ 1â€“3 å€‹å·¥ä½œå¤©å…§å‡ºè²¨ï¼ˆé€±æœ«èˆ‡ç¯€æ…¶é‡å¤§æ™‚é †å»¶ï¼‰ã€‚</li>
            <li>å®…é…ï¼šæ–°ç«¹è²¨é‹ï¼ˆå¸¸æº«ï¼‰ã€‚åˆ°è²¨è«‹ã€Œå…¨ç¨‹é–‹ç®±éŒ„å½±ã€ã€‚è‹¥æœ‰é‹æï¼Œ<b>24 å°æ™‚å…§æä¾›å½±ç‰‡èˆ‡ç…§ç‰‡</b>ï¼Œæˆ‘å€‘å”åŠ©å‘ç‰©æµç†è³ ã€‚</li>
            <li>è¶…å•†å–è²¨ï¼š<b>å…é‹</b>ï¼Œ<b>é™å–®ä¸€ 10 å°æ–¤ Ã— 1 ç®±</b>ï¼Œä¸”ç›®å‰<b>ä¸æ¥å—å¤–å³¶é…é€</b>ã€‚</li>
            <li>æ°´æœå±¬å¤©ç„¶è¾²ç”¢ï¼Œ<b>è¡¨çš®ç„¡æ³•å®Œç¾ç„¡ç‘•</b>å±¬æ­£å¸¸ç¾è±¡ï¼›å¤–è§€ã€ç”œåº¦æœƒå› æ°£å€™æ‰¹æ¬¡ç•¥æœ‰å·®ç•°ã€‚</li>
            <li>ç”Ÿé®®æ°´æœä¾æ³•ä¸é©ç”¨ 7 æ—¥çŒ¶è±«æœŸï¼›è‡ªç„¶æœæ–‘ã€ç³–ç“¤ã€ç”œåº¦è½å·®ä¸åˆ—ç‚ºé€€æ›ã€‚</li>
          </ul>
          <p class="note">è«‹ç¢ºèªä¸Šè¿°å…§å®¹ï¼Œæ²åˆ°åº•å³å¯å•Ÿç”¨åŒæ„å‹¾é¸ã€‚</p>
        </div>
      </details>
      <div style="margin:8px 0">
        <label for="agree">
          <input type="checkbox" id="agree" disabled>
          æˆ‘å·²è©³é–±<span style="text-decoration:underline">ä¸Šæ–¹</span>ã€Œç‰©æµèˆ‡é€€è²¨èªªæ˜ã€ä¸¦åŒæ„
        </label>
        <div class="help">ï¼ˆè‹¥æœªå•Ÿç”¨ï¼Œè«‹å…ˆå±•é–‹ä¸¦æ²åˆ°æœ€åº•ï¼‰</div>
      </div>

      <button id="submitBtn" class="btn btn-block" type="submit">é€å‡ºè¨‚å–®</button>
      <div id="result" class="note" style="margin-top:8px"></div>
    </form>
  </main>
</aside>

<!-- è¨‚å–®æŸ¥è©¢æŠ½å±œï¼ˆç²¾ç°¡ï¼šåªç•™è¨‚å–®ç·¨è™Ÿèˆ‡çµæœï¼›å·²ç§»é™¤æˆªåœ–/åˆ—å°ï¼‰ -->
<aside id="queryDrawer" class="drawer" aria-hidden="true">
  <header>
    <strong>è¨‚å–®æŸ¥è©¢</strong>
    <div class="btns">
      <button class="btn" onclick="toggleQuery(false)">é—œé–‰</button>
    </div>
  </header>
  <main>
    <form id="queryForm" onsubmit="queryOrder(event)" class="form">
      <div>
        <div class="label">è¨‚å–®ç·¨è™Ÿ</div>
        <input class="input" name="orderNo" placeholder="ä¾‹ï¼šK24-20251008-1234" required>
      </div>
      <button class="btn" type="submit" style="margin-top:8px">æŸ¥è©¢</button>
    </form>
    <div class="line"></div>
    <div id="queryCard" class="card content" style="display:none"></div>
  </main>
</aside>

<!-- ç«™å…§ã€Œè¶…å•†é–€å¸‚é¸æ“‡å™¨ã€æŠ½å±œï¼ˆä¸è·³é›¢ç¶²ç«™ï¼‰ -->
<aside id="cvsPicker" class="drawer" aria-hidden="true">
  <header>
    <strong>é¸æ“‡å–è²¨é–€å¸‚</strong>
    <div class="btns">
      <button class="btn-ghost" onclick="openOfficialFinder()">é–‹å•Ÿå®˜æ–¹æŸ¥è©¢</button> <!-- å‚™æ´ï¼šä»å¯å»å®˜æ–¹é  -->
      <button class="btn" onclick="toggleCvsPicker(false)">é—œé–‰</button>
    </div>
  </header>
  <main>
    <div class="note" style="margin-bottom:8px">
      ã€æ–°æ‰‹æ•™å­¸ã€‘ä¸‹æ–¹æ¸…å–®å¯è‡ªè¡Œåœ¨ç¨‹å¼å…§ç¶­è­·ï¼ˆè¦‹ CONFIG.CVS_STORESï¼‰ã€‚é»ã€Œé¸æ“‡ã€æœƒè‡ªå‹•å›å¡«ã€Œé–€å¸‚åç¨± / åº—è™Ÿã€ä¸¦é—œé–‰æ­¤è¦–çª—ã€‚
    </div>
    <div class="row" style="display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:10px">
      <div>
        <div class="label">ä»¥é—œéµå­—ç¯©é¸ï¼ˆåç¨±/åœ°å€/åº—è™Ÿï¼‰</div>
        <input id="cvsKeyword" class="input" placeholder="ä¾‹ï¼šè±åŸã€æˆåŠŸã€123456" oninput="renderCvsList()">
      </div>
    </div>
    <div id="cvsList" class="content" style="padding:0"></div>
  </main>
</aside>

<!-- ç®¡ç†å“¡æŠ½å±œï¼ˆç™»å…¥ï¼‹ç®¡ç†é¢æ¿ï¼‰ -->
<aside id="adminDrawer" class="drawer" aria-hidden="true">
  <header>
    <strong>ç®¡ç†é¢æ¿</strong>
    <div class="btns">
      <button class="btn-ghost" onclick="logoutAdmin()">ç™»å‡º</button>
      <button class="btn" onclick="toggleAdmin(false)">é—œé–‰</button>
    </div>
  </header>
  <main id="adminBody" class="content"><!-- å…§å®¹ç”± JS ä¾ç™»å…¥ç‹€æ…‹æ¸²æŸ“ --></main>
</aside>

<!-- æµ®å‹•è³¼ç‰©è»ŠæŒ‰éˆ•ï¼ˆğŸŠ æ©˜å­æ¨£å¼ï¼‰ -->
<button id="cartFab" class="fab" aria-label="é–‹å•Ÿè³¼ç‰©è»Š" onclick="toggleDrawer(true)">
  <span class="emoji" aria-hidden="true">ğŸŠ</span>
  <span id="fabCount" class="fab-badge">0</span>
</button>

<!-- ä¸èµ·çœ¼çš„ç®¡ç†å“¡æŒ‰éˆ• -->
<button class="admin-btn" onclick="toggleAdmin(true)" title="ç®¡ç†å“¡">ğŸ”’</button>

<!-- åº«å­˜ç·¨è¼¯é½’è¼ªï¼ˆæœªç™»å…¥æ™‚æœƒå¼•å°ç™»å…¥ï¼‰ -->
<button class="gear" onclick="toggleInvEdit()" title="åº«å­˜ç·¨è¼¯">âš™ï¸</button>

<!-- Hero -->
<section class="hero" id="hero">
  <div class="hero-inner wrap">
    <div class="logo"><img id="logoImg" src="" alt="æŸ‘å¿ƒæœåœ’ Logo"></div>
    <span class="pill">è±åŸãƒ»æ±å‹¢ï½œåœ¨åœ°å‚³æ‰¿</span>
    <h1>æŸ‘å¿ƒæœåœ’ï½œç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´</h1>
    <p>å…¬è€åªæ¤ªæŸ‘ï¼ˆ50å¹´ï¼‰èˆ‡æ±å‹¢èŒ‚è°·ï¼ˆ30å¹´ï¼‰ï¼Œç¾æ¡åˆ†ç´šç›´é€ã€‚10 / 25 å°æ–¤å¤šè¦æ ¼å¯é¸ï¼ŒåŒ¯æ¬¾å¾Œç«‹å³å®‰æ’å‡ºè²¨ï¼›åˆ°è²¨è«‹é–‹ç®±éŒ„å½±ï¼Œä¿éšœé‹æç†è³ ã€‚</p>
    <div style="margin-top:14px">
      <a id="shopNowBtn" class="btn" href="#hot" onclick="go(event,'hot')">é¦¬ä¸Šé¸è³¼</a>
    </div>
  </div>
</section>

<!-- åˆ†é¡éŒ¨é» -->
<nav class="subnav">
  <div class="wrap">
    <div class="rail">
      <button class="chip" onclick="go(event,'hot')">ğŸ”¥ ç†±éŠ·æ¬¾</button>
      <button class="chip" onclick="go(event,'pongan')">å…¬è€åªæ¤ªæŸ‘</button>
      <button class="chip" onclick="go(event,'maogao')">æ±å‹¢èŒ‚è°·</button>
      <button class="chip" onclick="toggleQuery(true)">è¨‚å–®æŸ¥è©¢</button>
    </div>
  </div>
</nav>

<!-- å“ç‰Œæ•…äº‹ + æœ€æ–°é®®å ± -->
<section class="section">
  <div class="wrap grid grid-2">
    <div class="card content">
      <h2>é—œæ–¼ã€ŒæŸ‘å¿ƒæœåœ’ã€</h2>
      <p>æˆ‘å€‘ç›¸ä¿¡ï¼Œå¥½çš„æ°´æœï¼Œä¾†è‡ªé•·å¹´çš„å …æŒèˆ‡åœŸåœ°çš„å›æ‡‰ã€‚</p>
      <p><b>å…¬è€åªæ¤ªæŸ‘</b>æ‰¿è¼‰è‘—å®¶æ—åœ¨å±±é ‚çš„ <b>50 å¹´</b>è€•ä½œè¨˜æ†¶ï¼šæ—¥ç…§å……è¶³ã€æ—©æ™šæº«å·®å¤§ï¼Œè®“æœçš®è–„ã€æ±æ°´è¶³ã€é…¸ç”œå¹³è¡¡ã€‚</p>
      <p><b>æ±å‹¢èŒ‚è°·</b>å‰‡æ˜¯ä¸€è·¯ç›¸ä¼´çš„ <b>30 å¹´</b>è€å‹ï¼šé¦™æ°£æ¸…ç”œã€çº–ç¶­ç´°ç·»ã€å…¥å£åŒ–é–‹ã€‚</p>
      <p>å¾æ¡æ”¶ã€åˆ†ç´šåˆ°è£ç®±ï¼Œæˆ‘å€‘åšçš„æ¯ä¸€æ­¥åªæœ‰ä¸€å€‹ç›®çš„â€”â€”æŠŠæœ€å¥½åƒçš„æŸ‘æ©˜ï¼Œå®Œå¥½é€åˆ°ä½ æ‰‹ä¸Šã€‚<br><b>ç”¨å¿ƒç¨®æŸ‘ï¼Œèˆ‡ä½ æŸ‘å¿ƒç›¸ä¼´ã€‚</b></p>
    </div>

    <div class="card content">
      <h2>æœ€æ–°é®®å ±ï½œæœåœ’æ—¥èªŒ</h2>
      <div class="rail-cards" id="newsRail"></div>
    </div>
  </div>
</section>

<!-- è¦æ ¼ç­‰ç´š -->
<section class="section">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>å¦‚ä½•åˆ†è¾¨è¦æ ¼ç­‰ç´š</h2>
      <p class="muted" style="margin-top:-6px">å¿«é€Ÿäº†è§£å„ç­‰ç´šå·®ç•°ï¼ŒæŒ‘å°æœ€åˆé©çš„å£æ„Ÿèˆ‡é¡†ç²’</p>
    </div>
    <div class="rail-cards spec-cards" id="specRail" style="padding:10px 14px"></div>
  </div>
</section>

<!-- ç†±éŠ· -->
<section id="hot" class="section theme-hot">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>ğŸ”¥ ç†±éŠ·æ¬¾</h2>
      <p class="muted" style="margin-top:-6px">å¤§å®¶æœ€å¸¸å›è³¼çš„ç†±é–€è¦æ ¼</p>
    </div>
    <div class="card" style="padding:0 14px 14px">
      <div id="hotGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- å…¬è€åªæ¤ªæŸ‘ -->
<section id="pongan" class="section theme-pongan">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>å…¬è€åªæ¤ªæŸ‘ï¼ˆ50å¹´ï¼‰</h2>
      <p class="muted" style="margin-top:-6px">ç¾æ¡åˆ†ç´šï½œçš®è–„å¤šæ±ï½œé…¸ç”œå¹³è¡¡</p>
    </div>
    <div class="card" style="padding:0 14px 14px">
      <div id="ponganGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- æ±å‹¢èŒ‚è°· -->
<section id="maogao" class="section theme-maogao">
  <div class="wrap">
    <div class="card content" style="padding-bottom:0">
      <h2>æ±å‹¢èŒ‚è°·ï¼ˆ30å¹´ï¼‰</h2>
      <p class="muted" style="margin-top:-6px">é¦™æ°£æ¸…ç”œï½œçº–ç¶­ç´°ç·»ï½œå…¥å£åŒ–é–‹</p>
    </div>
    <div class="card" style="padding:0 14px 14px">
      <div id="maogaoGrid" class="product-grid"></div>
    </div>
  </div>
</section>

<!-- åŒ¯æ¬¾è³‡è¨Š -->
<section class="section">
  <div class="wrap card content">
    <h2>åŒ¯æ¬¾è³‡è¨Š</h2>
    <p><strong id="bankName"></strong>ã€€æˆ¶åï¼š<strong id="bankHolder"></strong></p>
    <p>å¸³è™Ÿï¼š<strong id="bankNo"></strong></p>
    <p class="note">åŒ¯æ¬¾å®Œæˆå¾Œï¼Œæ­¡è¿åˆ°æˆ‘å€‘çš„
      <a href="https://www.facebook.com/profile.php?id=61581488901343" target="_blank">Facebook</a>
      ç§è¨Šã€Œè¨‚å–®ç·¨è™Ÿï¼‹åŒ¯æ¬¾å¾Œäº”ç¢¼ã€æˆ–ç›´æ¥å›è¦†ä¿¡ä»¶é€šçŸ¥ã€Œè¨‚å–®ç·¨è™Ÿï¼‹åŒ¯æ¬¾å¾Œäº”ç¢¼ã€ï¼Œæˆ‘å€‘å°‡ç«‹å³ç‚ºæ‚¨å®‰æ’å‡ºè²¨ã€‚</p>
  </div>
</section>

<footer>
  <div class="wrap">
    <div class="content" style="text-align:center;padding-top:0">
      <div class="muted">Â© æŸ‘å¿ƒæœåœ’ï½œå…¬è€åªæ¤ªæŸ‘ãƒ»æ±å‹¢èŒ‚è°·</div>
      <div class="muted">åœ°å€ï¼šå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿã€€|ã€€é€£çµ¡é›»è©±ï¼š0933-721-978</div>
    </div>
  </div>
</footer>

<!-- åŠ å…¥è³¼ç‰©è»Šæç¤º Toast -->
<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
/** =========================
 *  è¨­å®šï¼ˆå³é‚Šéƒ½æœ‰ä¸­æ–‡å‚™è¨»ï¼‰
 *  ========================= */
const CONFIG = {
  PRICES: { // â† å¯æ”¹ï¼šå”®åƒ¹è¡¨
    PONGAN: { "10å°æ–¤": { "23A": 750, "25A": 780, "27A": 820, "30A": 880 },
              "25å°æ–¤": { "23A": 1600,"25A": 1680,"27A": 1780,"30A": 1880 } },
    MAOGAO: { "10å°æ–¤": { "23A": 720, "25A": 760, "27A": 800, "30A": 860 },
              "25å°æ–¤": { "23A": 1500,"25A": 1580,"27A": 1680,"30A": 1780 } }
  },
  SHIPPING: 160,                 // â† å¯æ”¹ï¼šå®…é…é‹è²»ï¼ˆè¶…å•†å–è²¨ä¸€å¾‹å…é‹ï¼‰
  FREE_SHIP_THRESHOLD: 1800,     // â† å¯æ”¹ï¼šå®…é…å…é‹é–€æª»
  BANK: { name: "é€£ç·šéŠ€è¡Œ(824)", holder: "å¼µéˆæ³“", no: "11101-37823-13" }, // â† å¯æ”¹ï¼šåŒ¯æ¬¾è³‡è¨Š

  /* åœ–ç‰‡èˆ‡å½±ç‰‡ï¼ˆè²¼ GitHub ç¶²å€ä¹Ÿå¯ï¼Œè‡ªå‹•è½‰ RAWï¼‰ */
  IMAGES: {
    HERO: toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E5%B0%81%E9%9D%A2%E5%9C%96.png"),
    LOGO: toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E6%9F%91%E5%BF%83%E6%9E%9C%E5%9C%92LOGO.png"),
    SPEC_GALLERY: [
      toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/%E7%AD%89%E7%B4%9A%E6%AF%94%E8%BC%83%E5%9C%96.jpg"),
      "https://via.placeholder.com/1200x800?text=%E8%A6%8F%E6%A0%BC%E5%9C%96+2",
      "https://via.placeholder.com/1200x800?text=%E8%A6%8F%E6%A0%BC%E5%9C%96+3"
    ],
    NEWS: [
      {type:"video", src:toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/780323577.063367.mp4"), title:"æ¡æ”¶èŠ±çµ®"},
      {type:"image", src:"https://via.placeholder.com/1200x800?text=%E6%9C%80%E6%96%B0%E7%9F%AD%E5%BD%B1", title:"å±±é ‚æ™šéœ"},
      {type:"image", src:"https://via.placeholder.com/1200x800?text=%E6%9E%97%E9%96%93%E6%97%A5%E5%B8%B8", title:"æœåœ’æ—¥å¸¸"},
      {type:"video", src:"https://www.w3schools.com/html/mov_bbb.mp4", title:"åˆ†ç´šä¸Šæ¶"}
    ],
    PONGAN: {
      "10å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "25å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg")
    },
    MAOGAO: {
      "10å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "10å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/10%E6%96%A4%E5%A4%A7%E5%90%89%E5%A4%A7%E5%88%A93.jpg"),
      "25å°æ–¤-23A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-25A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-27A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg"),
      "25å°æ–¤-30A": toRaw("https://github.com/s9000721-cloud/gonglaoping/blob/main/25%E6%96%A4%E6%A9%98%E5%AD%90.jpg")
    }
  },

  /* ç«™å…§é–€å¸‚æ¸…å–®ï¼ˆå¯è‡ªè¡Œç¶­è­·ï¼Œä¾›ã€Œé¸æ“‡é–€å¸‚ã€ä½¿ç”¨ï¼‰ */
  CVS_STORES: {
    "7-11":[
      /* â† å¯æ”¹ï¼šå¸¸ç”¨é–€å¸‚ï¼ˆåç¨±ã€åº—è™Ÿã€åœ°å€ï¼‰ */
      {name:"è±åŸæˆåŠŸé–€å¸‚", code:"123456", addr:"å°ä¸­å¸‚è±åŸå€æˆåŠŸè·¯ 1 è™Ÿ"},
      {name:"æ±å‹¢ä¸­æ­£é–€å¸‚", code:"234567", addr:"å°ä¸­å¸‚æ±å‹¢å€ä¸­æ­£è·¯ 99 è™Ÿ"}
    ],
    "å…¨å®¶":[
      {name:"è±åŸæ©˜åœ’åº—", code:"A1234", addr:"å°ä¸­å¸‚è±åŸå€åœ“ç’°æ±è·¯ 88 è™Ÿ"}
    ]
  },

  GAS_ENDPOINT: "https://script.google.com/macros/s/AKfycbw5y8y1Yw7ymc7bP-iqV4KmxMB7l3c1wxMpPK1F6-d_vx_ejiIhCzhq0CyHPxDUNM92/exec",
  BRAND_TAG: "æŸ‘å¿ƒæœåœ’",

  /* é è¨­å·²å”®å‡º/åº«å­˜ï¼ˆç™»å…¥å¾Œå¯æ”¹ï¼‰ */
  INVENTORY: {
    "PON10-23A":{sold:0, stock:999}, "PON10-25A":{sold:0, stock:999}, "PON10-27A":{sold:0, stock:999}, "PON10-30A":{sold:0, stock:999},
    "PON25-23A":{sold:0, stock:999}, "PON25-25A":{sold:0, stock:999}, "PON25-27A":{sold:0, stock:999}, "PON25-30A":{sold:0, stock:999},
    "MAO10-23A":{sold:0, stock:999}, "MAO10-25A":{sold:0, stock:999}, "MAO10-27A":{sold:0, stock:999}, "MAO10-30A":{sold:0, stock:999},
    "MAO25-23A":{sold:0, stock:999}, "MAO25-25A":{sold:0, stock:999}, "MAO25-27A":{sold:0, stock:999}, "MAO25-30A":{sold:0, stock:999}
  }
};

/* =========================
 * å·¥å…·ï¼šæŠŠ GitHub æª”æ¡ˆç¶²å€è½‰ RAWï¼šgithub.com/.../blob/main/xxx â†’ raw.githubusercontent.com/.../main/xxx
 * ä»»ä½•é GitHub ç¶²å€æœƒåŸæ¨£å›å‚³
 * ========================= */
function toRaw(u){
  if(!u) return u;
  if(u.includes('raw.githubusercontent.com')) return u;
  if(u.includes('github.com/')){
    return u.replace('https://github.com/','https://raw.githubusercontent.com/').replace('/blob/','/');
  }
  return u;
}

/* ====== ç®¡ç†å“¡ç™»å…¥ï¼ˆç°¡æ˜“å¸³å¯† + è¨˜æ†¶ï¼‰ ====== */
const ADMIN = {
  LS_KEY:'gx_admin_login',   // â† å¯æ”¹ï¼šLocalStorage Key
  USER:'111111',             // â† å¯æ”¹ï¼šå¸³è™Ÿ
  PASS:'111111',             // â† å¯æ”¹ï¼šå¯†ç¢¼
  logged(){ try{return JSON.parse(localStorage.getItem(this.LS_KEY))?.ok;}catch{return false} },
  save(ok){ localStorage.setItem(this.LS_KEY, JSON.stringify({ok:!!ok, ts:Date.now()})); }
};
function toggleAdmin(open){
  const d = document.getElementById('adminDrawer');
  d.classList.toggle('open', !!open);
  renderAdmin();
}
function logoutAdmin(){ ADMIN.save(false); invEditMode=false; renderAdmin(); renderAllGrids(); }

/* ====== GitHub RAW è½‰æ›å™¨ï¼ˆåƒ…ä¿ç•™è½‰æ›ï¼Œå·²ç§»é™¤ Token/ä¸Šå‚³ï¼‰ ====== */
function renderAdmin(){
  const box = document.getElementById('adminBody');
  if(!ADMIN.logged()){
    box.innerHTML = `
      <h3>ç®¡ç†å“¡ç™»å…¥</h3>
      <div class="note">è¨˜æ†¶åœ¨æ­¤è£ç½®ã€‚</div>
      <div class="line"></div>
      <div class="form">
        <div class="label">å¸³è™Ÿ</div>
        <input class="input" id="admUser" placeholder="è¼¸å…¥å¸³è™Ÿ">
        <div class="label">å¯†ç¢¼</div>
        <input class="input" id="admPass" type="password" placeholder="è¼¸å…¥å¯†ç¢¼">
        <button class="btn" style="margin-top:10px" onclick="doAdminLogin()">ç™»å…¥</button>
      </div>
    `;
  }else{
    box.innerHTML = `
      <h3>å¿«é€Ÿç·¨è¼¯</h3>
      <p class="note">ç™»å…¥å¾Œå¯åœ¨å•†å“å¡ç›´æ¥æ”¹ã€Œå“å / åƒ¹æ ¼ / åœ–ç‰‡ / åº«å­˜ / ç‹€æ…‹ã€ã€‚æŒ‰å³ä¸‹è§’é½’è¼ªå¯åˆ‡æ›åº«å­˜æ¬„ä½ã€‚</p>
      <div class="line"></div>

      <h4>GitHub RAW é€£çµè½‰æ›å™¨</h4>
      <div class="note">æŠŠ <b>github.com/â€¦/blob/â€¦</b> è²¼ä¸Šä¾†ï¼ŒæŒ‰ã€Œè½‰æ›ã€å³å¯å¾—åˆ° raw é€£çµï¼Œè¤‡è£½å¾Œè²¼å›å•†å“åœ–ç‰‡æ¬„ã€‚</div>
      <div class="form">
        <div class="label">åœ–ç‰‡æˆ–å½±ç‰‡ç¶²å€ï¼ˆGitHub å¯è‡ªå‹•è½‰ RAWï¼‰</div>
        <input class="input" id="rawInput" placeholder="è²¼ä¸Šç¶²å€ï¼Œå¦‚ï¼šhttps://github.com/owner/repo/blob/main/a.jpg">
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" onclick="doConvertRaw()">è½‰æ›</button>
          <button class="btn-ghost" onclick="copyRaw()">è¤‡è£½çµæœ</button>
        </div>
        <div class="label" style="margin-top:10px">è½‰æ›çµæœ</div>
        <input class="input" id="rawOutput" readonly placeholder="è½‰æ›å¾Œçš„ RAW é€£çµæœƒå‡ºç¾åœ¨é€™è£¡">
      </div>

      <div class="line"></div>
      <p class="note">å°æŠ€å·§ï¼šç”¢å“å¡ä¸Šçš„ã€Œåœ–ç‰‡ç¶²å€ã€æ¬„ä½ï¼Œç›´æ¥è²¼ä»»ä½• GitHub é€£çµä¹Ÿæœƒè‡ªå‹•è½‰ RAWã€‚</p>
    `;
  }
}
function doAdminLogin(){
  const u = document.getElementById('admUser').value.trim();
  const p = document.getElementById('admPass').value.trim();
  if(u===ADMIN.USER && p===ADMIN.PASS){ ADMIN.save(true); alert('ç™»å…¥æˆåŠŸ'); renderAdmin(); }
  else alert('å¸³å¯†éŒ¯èª¤');
}
function doConvertRaw(){
  const src = document.getElementById('rawInput').value.trim();
  document.getElementById('rawOutput').value = toRaw(src);
}
function copyRaw(){
  const out = document.getElementById('rawOutput');
  if(!out.value){ alert('æ²’æœ‰å¯è¤‡è£½çš„å…§å®¹'); return; }
  navigator.clipboard.writeText(out.value).then(()=>alert('å·²è¤‡è£½'));
}

/* ====== ç”¢å“æ¸…å–® ====== */
const PONGAN = [
  { id:"PON10-23A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ23A", weight:"10å°æ–¤", size:"23A" },
  { id:"PON10-25A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ25A", weight:"10å°æ–¤", size:"25A" },
  { id:"PON10-27A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ27A", weight:"10å°æ–¤", size:"27A" },
  { id:"PON10-30A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ10å°æ–¤ï½œ30A", weight:"10å°æ–¤", size:"30A" },
  { id:"PON25-23A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ23A", weight:"25å°æ–¤", size:"23A" },
  { id:"PON25-25A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ25A", weight:"25å°æ–¤", size:"25A" },
  { id:"PON25-27A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ27A", weight:"25å°æ–¤", size:"27A" },
  { id:"PON25-30A", section:"PONGAN", title:"æ¤ªæŸ‘ï½œ25å°æ–¤ï½œ30A", weight:"25å°æ–¤", size:"30A" },
];
const MAOGAO = [
  { id:"MAO10-23A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ23A", weight:"10å°æ–¤", size:"23A" },
  { id:"MAO10-25A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ25A", weight:"10å°æ–¤", size:"25A" },
  { id:"MAO10-27A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ27A", weight:"10å°æ–¤", size:"27A" },
  { id:"MAO10-30A", section:"MAOGAO", title:"èŒ‚è°·ï½œ10å°æ–¤ï½œ30A", weight:"10å°æ–¤", size:"30A" },
  { id:"MAO25-23A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ23A", weight:"25å°æ–¤", size:"23A" },
  { id:"MAO25-25A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ25A", weight:"25å°æ–¤", size:"25A" },
  { id:"MAO25-27A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ27A", weight:"25å°æ–¤", size:"27A" },
  { id:"MAO25-30A", section:"MAOGAO", title:"èŒ‚è°·ï½œ25å°æ–¤ï½œ30A", weight:"25å°æ–¤", size:"30A" },
];

/* ====== LocalStorage Keys ====== */
const LS = {
  cart: 'gx_cart',            // â† å¯æ”¹ï¼šè³¼ç‰©è»Š
  shipMethod: 'gx_ship_method',
  form: 'gx_form',
  inventory: 'gx_inventory',
  overrides: 'gx_overrides'   // â† å¯æ”¹ï¼šæ¨™é¡Œ/åœ–ç‰‡/åƒ¹æ ¼/ç‹€æ…‹è¦†å¯«
};

/* ====== åŒ¯æ¬¾è³‡è¨Šèˆ‡åœ–ç‰‡å¸¶å…¥ ====== */
document.getElementById('bankName').textContent   = CONFIG.BANK.name;
document.getElementById('bankHolder').textContent = CONFIG.BANK.holder;
document.getElementById('bankNo').textContent     = CONFIG.BANK.no;
document.getElementById('hero').style.backgroundImage = `url('${CONFIG.IMAGES.HERO}')`;
document.getElementById('logoImg').src = CONFIG.IMAGES.LOGO;
document.getElementById('freeShipText').textContent = 'NT$ ' + CONFIG.FREE_SHIP_THRESHOLD.toLocaleString();

/* ====== åƒ¹æ ¼/åœ–ç‰‡å·¥å…· ====== */
const priceOf = (section,weight,size)=> CONFIG.PRICES[section]?.[weight]?.[size] ?? 0;
const currency = n => "NT$ "+(n||0).toLocaleString();
/* ä»»ä½•è²¼ä¸Šä¾†çš„ç¶²å€éƒ½å…ˆè·‘ä¸€æ¬¡ toRawï¼ˆæ–¹ä¾¿ä½ ç›´æ¥è²¼ GitHub ç¶²å€ï¼‰ */
const imgFor = (section,weight,size)=> toRaw(CONFIG.IMAGES[section]?.[`${weight}-${size}`] || 'https://via.placeholder.com/800x600?text=Image');
function setPrice(section,weight,size,val){
  if(!CONFIG.PRICES[section]) CONFIG.PRICES[section]={};
  if(!CONFIG.PRICES[section][weight]) CONFIG.PRICES[section][weight]={};
  CONFIG.PRICES[section][weight][size] = Math.max(0, parseInt(val||0));
  saveOverrides();
}
function setImage(section,weight,size,url){
  if(!CONFIG.IMAGES[section]) CONFIG.IMAGES[section]={};
  CONFIG.IMAGES[section][`${weight}-${size}`] = toRaw(url.trim()); // â† è‡ªå‹•è½‰ RAW
  saveOverrides(); renderAllGrids();
}

/* ====== è³¼ç‰©è»Š ====== */
const cart = loadCart();
function loadCart(){ try{ const s = localStorage.getItem(LS.cart); return s? JSON.parse(s):[]; }catch{ return []; } }
function saveCart(){ localStorage.setItem(LS.cart, JSON.stringify(cart)); }

/* ====== å‰ç«¯åº«å­˜ ====== */
let INV = loadInventory();
function loadInventory(){
  try{
    const s = localStorage.getItem(LS.inventory);
    return s ? JSON.parse(s) : JSON.parse(JSON.stringify(CONFIG.INVENTORY));
  }catch{ return JSON.parse(JSON.stringify(CONFIG.INVENTORY)); }
}
function saveInventory(){ localStorage.setItem(LS.inventory, JSON.stringify(INV)); }
let invEditMode = false;
function toggleInvEdit(){
  if(!ADMIN.logged()){ toggleAdmin(true); return; }
  invEditMode = !invEditMode; renderAllGrids();
}

/* ====== è¦†å¯«ï¼ˆæ¨™é¡Œ/åœ–ç‰‡/åƒ¹æ ¼/ç‹€æ…‹ï¼‰å„²å­˜ ====== */
function saveOverrides(){
  const map = { PRICES: CONFIG.PRICES, IMAGES: CONFIG.IMAGES, TITLES: collectTitles(), STATUS: STATUS_OVR };
  localStorage.setItem(LS.overrides, JSON.stringify(map));
}
function loadOverrides(){
  try{
    const s = localStorage.getItem(LS.overrides);
    if(!s) return;
    const o = JSON.parse(s);
    if(o.PRICES) CONFIG.PRICES = o.PRICES;
    if(o.IMAGES) CONFIG.IMAGES = o.IMAGES;
    if(o.TITLES) applyTitles(o.TITLES);
    if(o.STATUS) STATUS_OVR = o.STATUS;
  }catch{}
}
function collectTitles(){
  const t = {};
  [...PONGAN, ...MAOGAO].forEach(p=>{ t[p.id]=p.title; });
  return t;
}
function applyTitles(map){
  [...PONGAN, ...MAOGAO].forEach(p=>{ if(map[p.id]) p.title = map[p.id]; });
}

/* ====== ç”¢å“ç‹€æ…‹ï¼ˆé è³¼/å”®å®Œï¼‰ ======
 * STATUS_OVR çµæ§‹ï¼š
 * { "PON10-23A": {preorder:true/false, soldout:true/false}, ... }
 * å…©å€‹éƒ½ä¸å‹¾ï¼æ­£å¸¸è²©å”®
 * å”®å®Œå„ªå…ˆæ–¼é è³¼ï¼ˆå”®å®Œæ™‚æŒ‰éˆ•é–å®šï¼‰
 */
let STATUS_OVR = {};
function setStatus(id, key, val){
  if(!STATUS_OVR[id]) STATUS_OVR[id] = {preorder:false, soldout:false};
  STATUS_OVR[id][key] = !!val;
  // è‹¥å”®å®Œç‚ºçœŸï¼Œé è³¼è‡ªå‹•é—œé–‰ï¼ˆé¿å…è¡çªï¼‰ã€‚å¯è‡ªè¡Œç§»é™¤æ­¤è¡Œã€‚
  if(key==='soldout' && val){ STATUS_OVR[id].preorder = false; }
  saveOverrides(); renderAllGrids();
}
function statusOf(id){ return STATUS_OVR[id] || {preorder:false, soldout:false}; }

/* ====== æ¸²æŸ“ç”¢å“å¡ç‰‡ï¼ˆç™»å…¥å¯ç·¨è¼¯ï¼‰ ====== */
function productCard(p){
  const price = priceOf(p.section, p.weight, p.size);
  const img = imgFor(p.section, p.weight, p.size);
  const isHot = p.size==='25A'; // â† å¯æ”¹ï¼šç†±éŠ·é‚è¼¯
  const inv = INV[p.id] || {sold:0,stock:999};
  const editable = ADMIN.logged();
  const st = statusOf(p.id);
  const soldout = !!st.soldout;
  const preorder = !!st.preorder && !soldout;

  return `
    <article class="product card">
      <div class="img-wrap">
        ${soldout ? `<span class="img-flag flag-soldout">å·²å”®å®Œ</span>` : (preorder ? `<span class="img-flag flag-preorder">é–‹æ”¾é è³¼</span>` : ``)}
        <img src="${img}" alt="${p.title}">
      </div>
      <div class="body">
        <div class="row-between" style="gap:8px">
          <h3 class="title" ${editable?'contenteditable="true" onblur="editTitle(\''+p.id+'\', this.textContent.trim())"':''}>${p.title}</h3>
          ${isHot ? '<span class="tag-hot" aria-label="ç†±éŠ·">ğŸ”¥ ç†±éŠ·</span>' : ''}
        </div>

        <div class="note" style="margin-top:6px">
          å·²å”®å‡º ${inv.sold}ã€€å‰©é¤˜ ${inv.stock} ç®±
        </div>

        <div class="price" style="margin:6px 0 10px">
          ${editable ? `<input type="number" value="${price}" style="width:120px" onblur="setPrice('${p.section}','${p.weight}','${p.size}', this.value)">` : `${currency(price)}`}
        </div>

        ${editable ? `
          <div class="note" style="display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin:6px 0 10px">
            <span>åœ–ç‰‡ç¶²å€</span>
            <input type="url" value="${img}" style="flex:1;min-width:140px" onblur="setImage('${p.section}','${p.weight}','${p.size}', this.value)" placeholder="å¯ç›´æ¥è²¼ GitHub é€£çµï¼Œæœƒè‡ªå‹•è½‰ RAW">
          </div>
          <div class="note" style="display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin:6px 0 10px">
            <span>è²©å”®ç‹€æ…‹ï¼š</span>
            <label><input type="checkbox" ${preorder?'checked':''} onchange="setStatus('${p.id}','preorder',this.checked)"> é–‹æ”¾é è³¼</label>
            <label><input type="checkbox" ${soldout?'checked':''} onchange="setStatus('${p.id}','soldout',this.checked)"> å·²å”®å®Œ</label>
          </div>
        ` : ''}

        <button class="btn btn-block" onclick="addToCart('${p.id}')" aria-label="åŠ å…¥è³¼ç‰©è»Š" ${soldout?'disabled':''}>
          ${soldout ? 'ç„¡æ³•è³¼è²·' : (preorder ? 'é è³¼' : 'è³¼è²·')}
        </button>

        ${invEditMode ? `
          <div class="note" style="margin-top:8px;display:flex;gap:6px;align-items:center;flex-wrap:wrap">
            <span>å·²å”®å‡º</span><input type="number" min="0" value="${inv.sold}" style="width:80px" onchange="editInv('${p.id}','sold',this.value)">
            <span>å‰©é¤˜</span><input type="number" min="0" value="${inv.stock}" style="width:80px" onchange="editInv('${p.id}','stock',this.value)">
          </div>` : ''
        }
      </div>
    </article>`;
}
function editTitle(id, val){
  const item = [...PONGAN, ...MAOGAO].find(x=>x.id===id);
  if(item){ item.title = val || item.title; saveOverrides(); renderAllGrids(); }
}
function editInv(id,key,val){
  if(!INV[id]) INV[id]={sold:0,stock:0};
  INV[id][key] = Math.max(0, parseInt(val||0));
  saveInventory(); renderAllGrids();
}

function renderGrid(elId, items){
  const el = document.getElementById(elId);
  el.innerHTML = items.map(productCard).join('');
}
function renderAllGrids(){
  renderGrid('hotGrid', HOT);
  renderGrid('ponganGrid', PONGAN);
  renderGrid('maogaoGrid', MAOGAO);
}

/* ç†±éŠ·ï¼šç›®å‰ç”¨ 25A åšä»£è¡¨ï¼Œå¯æ”¹ç‚ºå…¶å®ƒè¦å‰‡ */
const HOT = [...PONGAN, ...MAOGAO].filter(p=>p.size==='25A');

/* åˆå§‹åŒ–æ»‘å‹•ç‰† */
function renderSpecRail(){
  const rail = document.getElementById('specRail');
  rail.innerHTML = CONFIG.IMAGES.SPEC_GALLERY.map(src=>`
    <div class="card"><img src="${src}" alt="è¦æ ¼ç­‰ç´šèªªæ˜" style="width:100%;height:auto;display:block;border-radius:16px"></div>
  `).join('');
}
function renderNewsRail(){
  const rail = document.getElementById('newsRail');
  rail.innerHTML = CONFIG.IMAGES.NEWS.map(item=>{
    if(item.type==='video'){
      return `<div class="card" style="overflow:hidden">
        <video src="${item.src}" controls style="width:100%;height:100%;display:block"></video>
        <div class="content" style="padding:10px">${item.title||''}</div></div>`;
    }else{
      return `<div class="card">
        <img src="${item.src}" alt="${item.title||''}" style="width:100%;height:auto;display:block;border-radius:16px 16px 0 0">
        <div class="content" style="padding:10px">${item.title||''}</div></div>`;
    }
  }).join('');
}

/* ====== åŠ å…¥è³¼ç‰©è»Šæµç¨‹ï¼ˆä¸è‡ªå‹•é–‹è³¼ç‰©è»Šï¼‰ ====== */
function addToCart(pid){
  const src = [...PONGAN, ...MAOGAO].find(x=>x.id===pid);
  if(!src) return;
  const st = statusOf(pid);
  if(st.soldout){ showToast('æ­¤å“é …å·²å”®å®Œ'); return; }

  const price = priceOf(src.section, src.weight, src.size);
  const existed = cart.find(x=>x.id===pid);
  if(existed) existed.qty++;
  else cart.push({ id:src.id, title:src.title, price, qty:1, weight:src.weight, size:src.size, section:src.section });
  saveCart(); renderCart();

  // å‹å–„æç¤ºï¼šä¸è·³è³¼ç‰©è»Šï¼Œæ”¹ç”¨ Toast + å¾½ç« å‹•ç•«
  showToast('å·²åŠ å…¥è³¼ç‰©è»Š');
  bumpBadge();
}
function mutateQty(i,delta){
  cart[i].qty += delta;
  if(cart[i].qty<=0) cart.splice(i,1);
  saveCart(); renderCart();
}
function clearCart(){
  if(!cart.length) return;
  if(confirm('ç¢ºå®šè¦æ¸…ç©ºè³¼ç‰©è»Šï¼Ÿ')){
    cart.length = 0; saveCart(); renderCart();
  }
}
function calc(){
  const method = getShipMethod();
  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);
  let shipping = 0;
  if(method==='CVS') shipping = 0;
  else shipping = (subtotal>=CONFIG.FREE_SHIP_THRESHOLD || cart.length===0) ? 0 : CONFIG.SHIPPING;
  return {subtotal, shipping, total: subtotal+shipping};
}
function renderCart(){
  const list = document.getElementById('cartList');
  if(!cart.length){
    list.innerHTML = `<div class="muted">è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œå»æŒ‘å¹¾é¡†æœ€é ‚çš„æ©˜å­å§ ğŸŠ</div>`;
  }else{
    list.innerHTML = cart.map((c,i)=>`
      <div class="cart-row">
        <div>
          <div><strong>${c.title}</strong></div>
          <div class="note">${currency(c.price)} Ã— ${c.qty}</div>
        </div>
        <div class="qty">
          <button aria-label="æ¸›å°‘" onclick="mutateQty(${i},-1)">â€“</button>
          <span>${c.qty}</span>
          <button aria-label="å¢åŠ " onclick="mutateQty(${i},1)">ï¼‹</button>
        </div>
      </div>`).join('');
  }
  const {subtotal,shipping,total} = calc();
  document.getElementById('subtotal').textContent = currency(subtotal);
  document.getElementById('shipping').textContent = currency(shipping);
  document.getElementById('total').textContent = currency(total);
  document.getElementById('fabCount').textContent = cart.reduce((s,i)=>s+i.qty,0);

  // æ›´æ–°é…é€æ¨™ç±¤
  const method = getShipMethod();
  document.getElementById('shipLabel').textContent = method==='CVS' ? 'é‹è²»ï¼ˆè¶…å•†å–è²¨ï½œå…é‹ï¼‰' : 'é‹è²»ï¼ˆå®…é…ï¼‰';
  // è¡¨å–®åŒæ­¥é¸å–®
  const shipSel = document.querySelector('select[name="ship"]');
  if(shipSel){ shipSel.value = method==='CVS' ? 'è¶…å•†å–è²¨' : 'å®…é…'; }
  // æ¬„ä½äº’æ–¥
  document.getElementById('homeFields').style.display = (method==='HOME') ? 'block':'none';
  document.getElementById('cvsFields').style.display  = (method==='CVS')  ? 'block':'none';
  document.querySelector('input[name="addr"]')?.toggleAttribute('required', method==='HOME');
}

/* æŠ½å±œåˆ‡æ› */
function toggleDrawer(open){ document.getElementById('drawer').classList.toggle('open', !!open); }
function toggleQuery(open){ document.getElementById('queryDrawer').classList.toggle('open', !!open); }

/* å…§å»ºã€Œé–€å¸‚é¸æ“‡å™¨ã€æŠ½å±œ */
function toggleCvsPicker(open){ document.getElementById('cvsPicker').classList.toggle('open', !!open); if(open) renderCvsList(); }
/* ä¾ç›®å‰é¸åˆ°çš„å“ç‰Œé¡¯ç¤ºé–€å¸‚æ¸…å–®ï¼Œä¸¦å¯é—œéµå­—éæ¿¾ */
function renderCvsList(){
  const brand = document.querySelector('select[name="cvsBrand"]').value || '7-11';
  const kw = (document.getElementById('cvsKeyword').value||'').trim();
  const list = (CONFIG.CVS_STORES[brand]||[]).filter(s=>{
    if(!kw) return true;
    return (s.name+s.addr+s.code).includes(kw);
  });
  const box = document.getElementById('cvsList');
  if(!list.length){ box.innerHTML = '<div class="content">ç›®å‰æ­¤å“ç‰Œå°šæœªå»ºç«‹å¸¸ç”¨é–€å¸‚ã€‚è«‹é»ã€Œé–‹å•Ÿå®˜æ–¹æŸ¥è©¢ã€æˆ–å›ç¨‹å¼å…§æ–°å¢ã€‚</div>'; return; }
  box.innerHTML = list.map(s=>`
    <div class="card content" style="margin-bottom:8px">
      <div style="display:flex;justify-content:space-between;gap:10px;align-items:center">
        <div>
          <div style="font-weight:800">${s.name} / ${s.code}</div>
          <div class="note">${s.addr||''}</div>
        </div>
        <button class="btn" onclick="chooseCvs('${s.name}','${s.code}')">é¸æ“‡</button>
      </div>
    </div>
  `).join('');
}
function chooseCvs(name, code){
  const input = document.querySelector('input[name="cvsStore"]');
  if(input){ input.value = `${name} / ${code}`; }
  setShipMethod('CVS'); // é¸æ“‡é–€å¸‚å¾Œè‡ªå‹•åˆ‡åˆ°è¶…å•†å–è²¨
  toggleCvsPicker(false);
  showToast('å·²é¸æ“‡é–€å¸‚');
}
/* å‚™æ´ï¼šè‹¥éœ€è¦åˆ°å®˜æ–¹é é¢æŸ¥è©¢ */
function openOfficialFinder(){
  const brand = document.querySelector('select[name="cvsBrand"]').value;
  const url = (brand==='å…¨å®¶') ? 'https://www.family.com.tw/marketing/inquiry.aspx' : 'https://emap.pcsc.com.tw/';
  window.open(url,'_blank'); // é–‹æ–°åˆ†é ï¼Œé¿å…è·³é›¢æœ¬é 
}

/* é…é€æ–¹å¼åˆ‡æ› + é™åˆ¶æ¢ä»¶ï¼ˆè¶…å•†ï¼š10æ–¤Ã—1ï¼‰ */
function getShipMethod(){ return localStorage.getItem(LS.shipMethod) || 'HOME'; }
function setShipMethod(m){
  if(m==='CVS'){
    const ok = cart.length===1 && cart[0].weight==='10å°æ–¤' && cart[0].qty===1;
    if(!ok){
      alert('è¶…å•†å–è²¨é™ã€Œå–®ä¸€ 10 å°æ–¤ Ã— 1 ç®±ã€ã€‚è«‹èª¿æ•´è³¼ç‰©è»Šæ•¸é‡å¾Œå†é¸æ“‡ã€‚');
      m = 'HOME';
    }
  }
  localStorage.setItem(LS.shipMethod, m);
  document.getElementById('shipHomeBtn').className = (m==='HOME') ? 'btn' : 'btn-ghost';
  document.getElementById('shipCvsBtn').className  = (m==='CVS')  ? 'btn' : 'btn-ghost';
  renderCart();
}

/* å¹³æ»‘æ²å‹•ï¼ˆæ‰£æ‰ subnav é«˜åº¦ï¼‰ */
function go(e,id){
  if(e) e.preventDefault();
  const el = document.getElementById(id);
  if(!el) return;
  const navH = document.querySelector('.subnav')?.offsetHeight || 0;
  const y = el.getBoundingClientRect().top + window.scrollY - navH - 6;
  window.scrollTo({top:y,behavior:'smooth'});
}
