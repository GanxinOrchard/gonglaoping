/* =========================
   Base / Variables
   ========================= */
:root{
  --bg:#FFF7ED;            /* 全站淺橘背景（你說白底改橘） */
  --surface:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --brand:#f59e0b;         /* 主橘 */
  --brand-600:#d97706;
  --accent:#3F8C45;        /* 綠色（按鈕/圖示） */
  --red:#ef4444;
  --border:#e5e7eb;
  --shadow:0 12px 28px rgba(0,0,0,.06);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%}
body{
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","Helvetica Neue",Arial,sans-serif;
  line-height:1.6;
}
img,video{display:block;max-width:100%;height:auto}
a{color:#7c2d12;text-decoration:none}
.wrap{max-width:1120px;margin:0 auto;padding:0 16px}
.card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:18px;
  box-shadow:var(--shadow);
}
.section{padding:36px 0}
h1,h2,h3{margin:0 0 8px;line-height:1.25}
.muted{color:var(--muted)}
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  padding:12px 16px;border-radius:14px;font-weight:800;cursor:pointer;
  background:var(--brand);color:#111;border:1px solid rgba(0,0,0,.06);
  box-shadow:0 12px 20px rgba(245,158,11,.28);
  transition:transform .15s ease, background .15s ease;
}
.btn:hover{background:var(--brand-600);transform:translateY(-1px)}
.btn-ghost{background:#fff;color:var(--text);border:1px solid var(--border);box-shadow:none}
.btn-ghost:hover{background:#f9fafb}

/* Top chips 一行（你說四顆導引做一行） */
.rail{display:flex;gap:8px;align-items:center;overflow:auto;white-space:nowrap;padding:8px 4px}
.chip{
  flex:0 0 auto;padding:8px 12px;border-radius:999px;font-weight:800;cursor:pointer;
  background:#FEF3C7;color:#7c2d12;border:1px solid #FDE68A;font-size:13px;
}

/* Hero（封面大圖一張＋中置 LOGO 與標語） */
.hero{
  position:relative;min-height:66vh;
  background:#000 center/cover no-repeat;isolation:isolate;display:grid;place-items:center;color:#fff;
}
.hero::after{
  content:"";position:absolute;inset:0;
  background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.15) 55%,rgba(0,0,0,0));
  z-index:0;
}
.hero-inner{position:relative;z-index:1;text-align:center;padding:80px 16px}
.hero .logo{
  width:92px;height:92px;border-radius:16px;border:1px solid #fff7;margin:0 auto 10px;object-fit:contain;background:#fff;
}
.hero h1{font-size:clamp(24px,5vw,40px);letter-spacing:.2px;margin:4px 0}
.hero p{font-size:clamp(13.5px,3.4vw,16px);opacity:.98;margin:4px 0 8px}

/* 小導覽（漢堡）擺在品牌故事上方會靠 CSS 控制尺寸 */
.hamburger{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.85);backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
.hamburger .wrap{display:flex;gap:8px;align-items:center;padding:8px}
.hamburger .chip{font-size:12px}

/* 品種卡片（維持簡潔） */
.grid{display:grid;gap:16px}
@media(min-width:900px){ .grid-2{grid-template-columns:1fr 1fr} }
.variety{display:grid;grid-template-columns:1fr;overflow:hidden}
@media(min-width:900px){ .variety{grid-template-columns:1.1fr .9fr} }
.variety .media img{width:100%;aspect-ratio:4/3;object-fit:cover}
.ribbon{
  position:absolute;left:12px;top:12px;padding:6px 10px;border-radius:12px;font-weight:900;font-size:12.5px;
  background:#ffedd5;border:1px solid #fdba74;color:#7c2d12
}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;font-size:12.5px;font-weight:800;border:1px solid var(--border);background:#fff}

/* 甘心量表（改細版長條） */
.meter{margin:6px 0 0;display:grid;gap:6px}
.meter-row{display:grid;grid-template-columns:56px 1fr auto;align-items:center;gap:8px}
.meter-row b{font-size:12px}
.bar{height:8px;background:#f3f4f6;border-radius:999px;overflow:hidden;position:relative}
.bar i{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,#f59e0b,#fdba74)}
.meter-val{font-size:12px;color:#6b7280}

/* 尺寸（單顆直徑） */
.size-kv{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.size-kv .kv{background:#fff;border:1px solid var(--border);border-radius:10px;padding:6px 10px;font-weight:800;font-size:12.5px}

/* 價格列（價格＋已售出/剩餘） */
.price-row{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:8px 0 10px}
.price-row .price{font-size:18px;font-weight:900}
.stock{font-size:12.5px;color:#6b7280}

/* CTA 滿版 */
.btn-block{width:100%}

/* 果實近拍（3 張橫滑）放產品區上方 */
.fruit-rail{display:flex;gap:12px;overflow:auto;scroll-snap-type:x mandatory;padding:8px 4px}
.fruit-card{flex:0 0 86%;scroll-snap-align:center;border-radius:16px;border:1px solid var(--border);overflow:hidden;background:#fff}
.fruit-card img{width:100%;aspect-ratio:1/1;object-fit:cover} /* 1:1 */
.fruit-card .cap{padding:10px;font-weight:700}

/* 產季時間軸：在果實近拍下方，小橘子＋月份（手機字放大） */
.timeline{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
.month{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px;text-align:center}
.month b{font-size:clamp(14px,5vw,18px)}          /* 手機放大 1.5x 左右 */
.orange{width:26px;height:26px;border-radius:50%;margin:0 auto 6px;background:#9ca3af}
.orange.pale{background:#65a30d}                  /* 青綠（10 月） */
.orange.mid{background:#f59e0b}
.orange.deeper{background:#d97706}

/* 左側浮動：買過都說讚（平行購物車） */
.fab-col{position:fixed;left:12px;bottom:calc(88px + env(safe-area-inset-bottom));z-index:90;display:flex;flex-direction:column;gap:10px}
.fab-btn{
  background:#f59e0b;color:#111;border:1px solid rgba(0,0,0,.06);
  padding:10px 12px;border-radius:999px;box-shadow:0 12px 18px rgba(245,158,11,.33);
  font-weight:900;cursor:pointer
}

/* ====== CART PANEL FIX (覆蓋版) ====== */
.panel{
  position:fixed; right:14px; bottom:14px;
  width:min(420px,92vw); height:min(76vh,720px);
  background:#fff; border-radius:22px; box-shadow:var(--shadow);
  display:none; flex-direction:column; z-index:99; overflow:hidden;
}
.panel.show{display:flex}
.panel .panel-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-bottom:1px solid #eee; background:#fff;
  position:sticky; top:0; z-index:2;
}
.panel .title{font-weight:900}
.pill{border:1px solid #e5e7eb;background:#fff;border-radius:999px;padding:6px 10px;font-weight:800}
.pill.green,.close.green{background:#10b981;color:#fff;border:0}

.panel .panel-body{
  display:flex; flex-direction:column; gap:12px;
  padding:10px; overflow:auto; -webkit-overflow-scrolling:touch;
}

/* 橘色背景（保留你原來樣式） */
.panel.cart{background:linear-gradient(180deg,#ffedd5,#ffd6a2)}

/* 免運提示條 */
.panel.cart .notice{
  background:#fff; border:1px dashed #f59e0b; color:#111;
  border-radius:12px; padding:8px 10px; font-weight:800;
}

/* 清單與項目 */
.cart-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
.cart-item{
  display:grid; grid-template-columns:56px 1fr auto auto; align-items:center; gap:10px;
  background:#fff; border-radius:14px; padding:8px;
}
.cart-item img{width:56px;height:56px;object-fit:contain}
.cart-item .t{font-weight:800; color:#111; line-height:1.3}
.cart-item .p{color:#111; font-weight:800; padding:0 6px}
.qty{display:flex;align-items:center;gap:8px;justify-self:end}
.qty button{
  border:1px solid #e5e7eb; background:#fff; border-radius:8px;
  width:28px; height:28px; font-weight:900; cursor:pointer;
}
.qty span{min-width:20px;text-align:center;font-weight:800}

/* 折扣碼區塊 */
.coupon{display:flex;gap:8px;align-items:center;margin-top:4px}
.coupon label{font-weight:900}
.coupon input{
  flex:1;border:1px solid #e5e7eb;border-radius:10px;padding:10px;
  font-size:16px; /* iOS 防縮放 */
  background:#fff;
}
.hint{font-size:12px;color:#374151;margin-top:4px}

/* 總計區塊 */
.summary{
  margin-top:4px;background:#fff;border-radius:14px;padding:10px 12px;
  display:flex; flex-direction:column; gap:6px;
}
.summary .disc-row{color:#16a34a}
.summary .total{font-size:18px;font-weight:900}

/* 表單與欄位 */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:6px}
.grid .wide{grid-column:1/-1}
.grid label{display:flex;flex-direction:column;gap:6px}
.grid input, textarea{
  border:1px solid #e5e7eb; border-radius:10px; padding:12px 10px; font-size:16px; /* iOS 防縮放 */
  background:#fff;
}
.ship,.pay{margin-top:8px;border:1px solid #e5e7eb;border-radius:12px;padding:8px;background:#fff}
.ship legend,.pay legend{font-weight:900}
.pay .linepay-badge{
  display:inline-block;background:#00b900;color:#fff;border-radius:8px;padding:2px 6px;font-weight:900
}

.policy{margin-top:8px}
.agree{display:flex;align-items:center;gap:6px;margin:6px 0 8px}

/* 小螢幕微調 */
@media(max-width:420px){
  .cart-item{grid-template-columns:48px 1fr auto auto}
  .cart-item img{width:48px;height:48px}
}
/* === Cart Mobile Fullscreen & Scroll Lock (drop-in fix) === */
.panel{ position:fixed; z-index:99; }
.panel .panel-head{ position:sticky; top:0; z-index:2; }
.panel .panel-body{
  flex:1; overflow:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 16px);
}

/* 桌機維持原尺寸；手機改「覆蓋式全螢幕橘色購物車」 */
@media (max-width: 820px){
  .panel.cart{
    left:0; right:0; top:0; bottom:0;
    width:100vw; height:100dvh;
    border-radius:0;
  }
}

/* 打開購物車時鎖住背景頁面，避免整頁跟著移動 */
body.modal-open{
  position:fixed; width:100%; overflow:hidden;
}

/* 輸入欄位 16px，避免 iOS 自動放大造成版面位移 */
input, textarea, select{ font-size:16px; }