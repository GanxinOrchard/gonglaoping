:root{
  --orange:#f59e0b; --orange-2:#fb923c; --orange-3:#ffedd5;
  --green:#10b981; --dark:#1f2937; --muted:#6b7280; --cream:#faf7ef;
  --white:#fff; --shadow:0 10px 28px rgba(0,0,0,.08);
  --radius:18px;
  --font-head:'Zen Maru Gothic','Noto Sans TC',system-ui;
  --font-body:'Noto Sans TC',system-ui;
}
*{box-sizing:border-box}
body{margin:0;font-family:var(--font-body);color:var(--dark);background:#fff7ed;}
img{max-width:100%;display:block}
a{text-decoration:none;color:#0ea5e9}

.freebar{position:sticky;top:0;z-index:30;background:#111;color:#fff;
  text-align:center;padding:8px 12px;font-size:14px}

.site-header{background:linear-gradient(0deg,#fff7ed, #ffe6c7);
  padding:12px 16px;position:sticky;top:40px;z-index:25;border-bottom:1px solid #f3f4f6}
.brand{display:flex;align-items:center;justify-content:center;gap:12px}
.brand-logo{width:44px;height:44px;border-radius:12px;background:#fff;border:1px solid #eee;object-fit:cover}
.brand-name{font-family:var(--font-head);font-size:22px;font-weight:900;color:#0f172a}

.hero{position:relative;isolation:isolate}
.hero-bg{width:100%;height:54vh;object-fit:cover;object-position:center}
@media(min-width:768px){.hero-bg{height:68vh}}
.hero-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:16px;text-align:center;background:linear-gradient(180deg,rgba(0,0,0,.0),rgba(0,0,0,.35))}
.hero-badge{background:#ffedd5;color:#0f172a;border-radius:999px;padding:10px 14px;font-weight:800;box-shadow:var(--shadow)}
.hero-title{font-family:var(--font-head);font-weight:900;color:#fff;font-size:28px;line-height:1.1;text-shadow:0 2px 6px rgba(0,0,0,.25)}
.hero-sub{color:#f1f5f9;margin:0 10px 8px}
.btn{border:0;border-radius:999px;padding:10px 16px;font-weight:800;cursor:pointer}
.btn.primary{background:var(--orange);color:#111}
.btn.primary.lg{padding:12px 22px;font-size:18px}
.btn.secondary{background:#fff;color:#111;border:1px solid #e5e7eb}
.btn.black{background:#111;color:#fff}
.btn.full{width:100%}

.quick-nav{display:flex;gap:8px;justify-content:center;padding:10px}
.quick-nav .pill{background:#fff;border:1px solid #f1f5f9;padding:8px 12px;border-radius:999px;color:#0f172a;font-weight:800}
.quick-nav .pill:hover{background:#fff7ed}

.section-title{font-family:var(--font-head);font-size:24px;font-weight:900;margin:20px 16px 10px}

.story{padding:6px 0 10px}
.story-slider,.closeups-slider{position:relative;margin:0 16px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
.story .slides,.closeups .slides{display:flex;scroll-snap-type:x mandatory;overflow-x:auto;gap:14px;padding:14px}
.story-card{min-width:80%;scroll-snap-align:center;background:#fff7ed;border-radius:14px;padding:16px}
.story-card h3{font-size:18px;margin:0 0 6px;font-family:var(--font-head)}
.story-card p{margin:0 0 6px;color:#374151}
.story-card .highlight{color:#0f172a;background:#fde68a;border-radius:8px;padding:6px 8px;display:inline-block}
.story-card .dim{color:var(--muted);font-size:13px}

.slider-arrow{position:absolute;top:50%;transform:translateY(-50%);
  background:#111;color:#fff;border:0;border-radius:999px;width:34px;height:34px;
  display:flex;align-items:center;justify-content:center;opacity:.85;cursor:pointer;z-index:2}
.slider-arrow.left{left:8px}
.slider-arrow.right{right:8px}

.closeups{padding:6px 0 4px}
.closeup{min-width:78%;scroll-snap-align:center}
.ratio-box{width:100%;aspect-ratio:1/1;background:#fff;border-radius:16px;display:flex;align-items:center;justify-content:center;border:1px solid #eee}
.ratio-box img{max-width:94%;max-height:94%;object-fit:contain}
.closeup figcaption{text-align:center;color:#374151;margin-top:8px}

.timeline{padding:2px 0 16px}
.timeline-intro{margin:0 16px 8px;color:#374151}
.row-title{margin:8px 16px;color:#111;font-weight:900}
.row-cards{display:flex;gap:12px;margin:0 16px 18px;overflow-x:auto;padding-bottom:6px}
.month-card{min-width:112px;background:#fff;border:1px solid #eee;border-radius:16px;padding:10px;text-align:center;box-shadow:var(--shadow)}
.month-emoji{font-size:30px;display:block}
.month-name{font-weight:900;font-size:18px}
.month-note{font-size:12px;color:#6b7280}

.shop{padding:4px 0 30px}
.product{background:#fff;border-radius:22px;margin:16px;box-shadow:var(--shadow);overflow:hidden}
.product-thumb{position:relative;background:#fff}
.product-thumb img{width:100%;height:220px;object-fit:contain;padding:8px}
.tag{position:absolute;left:12px;top:12px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:6px 10px;font-weight:900}
.product-title{font-family:var(--font-head);font-size:22px;margin:10px 16px 0}
.product-desc{margin:6px 16px 10px;color:#374151}
.specs{display:flex;gap:8px;margin:0 16px 10px}
.chip{border:1px solid #e5e7eb;background:#fff;border-radius:999px;padding:8px 12px;font-weight:800;cursor:pointer}
.chip.on{border-color:#f59e0b;background:#fffbeb}
.meters{display:grid;grid-template-columns:1fr;gap:6px;margin:0 16px 10px}
.meter{display:flex;align-items:center;gap:10px}
.meter span{width:42px;color:#111;font-weight:900}
.bar{flex:1;height:10px;border-radius:999px;background:#f3f4f6;position:relative;overflow:hidden}
.bar::after{content:'';position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg,#fed7aa,#f59e0b);border-radius:999px}
.meter.size{align-items:flex-start}
.size .size-text{background:#fff7ed;border:1px dashed #f59e0b;padding:6px 10px;border-radius:10px}

.buyrow{display:flex;align-items:center;gap:14px;padding:8px 16px 16px}
.price .p{font-size:18px}
.sold{color:#6b7280;font-size:13px}

.floating{position:fixed;right:12px;bottom:18px;z-index:40;background:#f59e0b;color:#111;border:0;border-radius:20px;padding:10px 14px;font-weight:900;box-shadow:var(--shadow)}
.floating.left{left:12px;right:auto}
.floating.small{bottom:86px;padding:8px 10px}
#cart-count{background:#111;color:#fff;border-radius:999px;padding:2px 8px;margin-left:6px}

.panel{position:fixed;right:14px;bottom:14px;width:min(420px,92vw);height:min(76vh,720px);background:#fff;border-radius:22px;box-shadow:var(--shadow);display:none;flex-direction:column;z-index:45;overflow:hidden}
.panel.show{display:flex}
.panel .panel-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #eee;background:#fff}
.panel .title{font-weight:900}
.pill{border:1px solid #e5e7eb;background:#fff;border-radius:999px;padding:6px 10px;font-weight:800}
.pill.green,.close.green{background:#10b981;color:#fff;border:0}
.panel .panel-body{padding:10px;overflow:auto}

.panel.cart{background:linear-gradient(180deg,#ffedd5,#ffd6a2)}
.cart-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
.cart-item{display:flex;align-items:center;gap:10px;background:#fff;border-radius:14px;padding:8px}
.cart-item img{width:56px;height:56px;object-fit:contain}
.cart-item .t{font-weight:800}
.qty{display:flex;align-items:center;gap:8px;margin-left:auto}
.qty button{border:1px solid #e5e7eb;background:#fff;border-radius:8px;width:28px;height:28px;font-weight:900}

.coupon{display:flex;gap:8px;align-items:center;margin-top:8px}
.coupon label{font-weight:900}
.coupon input{flex:1;border:1px solid #e5e7eb;border-radius:10px;padding:8px 10px}
.hint{font-size:12px;color:#374151;margin-top:4px}

.summary{margin-top:10px;background:#fff;border-radius:14px;padding:10px 12px}
.summary .total{font-size:18px;font-weight:900}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
.grid .wide{grid-column:1/-1}
.grid label{display:flex;flex-direction:column;gap:6px}
.grid input,textarea{border:1px solid #e5e7eb;border-radius:10px;padding:10px;font-size:16px}

.ship,.pay{margin-top:10px;border:1px solid #e5e7eb;border-radius:12px;padding:8px;background:#fff}
.ship legend,.pay legend{font-weight:900}
.pay .linepay-badge{display:inline-block;background:#00b900;color:#fff;border-radius:8px;padding:2px 6px;font-weight:900}

.policy{margin-top:8px}
.agree{display:flex;align-items:center;gap:6px;margin:6px 0 8px}

.lookup input{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:8px 10px}
.lookup .lookup-res{background:#111;color:#e5e7eb;padding:10px;border-radius:10px;margin-top:10px;white-space:pre-wrap;max-height:50vh;overflow:auto}

.site-footer{display:flex;gap:16px;align-items:center;justify-content:space-between;background:#111;color:#fff;padding:14px 16px;margin-top:26px}
.site-footer img{width:48px;height:48px;border-radius:12px;background:#fff}
.site-footer .topbtn{background:#f59e0b;color:#111;border:0;border-radius:999px;padding:8px 14px;font-weight:900}

.toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111;color:#fff;border-radius:999px;padding:10px 14px;display:none;z-index:60}
.toast.show{display:block}

@media(min-width:920px){
  .story-card{min-width:60%}
  .closeup{min-width:46%}
}

/* 1) 避免 Hero 漸層層蓋到按鈕 */
.hero::after { pointer-events: none; }

/* 2) 讓浮動按鈕與抽屜在最上層 */
.fab { z-index: 1050; }
.drawer { z-index: 1100; }

/* 3) 抽屜收闔動畫與顯示狀態（若你已經有一套，確認 class 名稱一致） */
.drawer { position: fixed; right: 0; top: 0; bottom: 0; width: min(480px, 96%); transform: translateX(105%); transition: transform .28s ease; }
.drawer.open { transform: translateX(0); }

/* 4) Sticky 子導覽避免壓到點擊區 */
.subnav { position: sticky; top: 0; z-index: 1000; }

/* === Cart Mobile Fullscreen & Scroll Lock (drop-in fix) === */
.panel{ position:fixed; z-index:99; }
.panel .panel-head{ position:sticky; top:0; z-index:2; }
.panel .panel-body{
  flex:1; overflow:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 16px);
}

/* 桌機維持原尺寸；手機改「覆蓋式全螢幕橘色購物車」 */
@media (max-width: 820px){
  .panel.cart{
    left:0; right:0; top:0; bottom:0;
    width:100vw; height:100dvh;
    border-radius:0;
  }
}

/* 打開購物車時鎖住背景頁面，避免整頁跟著移動 */
body.modal-open{
  position:fixed; width:100%; overflow:hidden;
}

/* 輸入欄位 16px，避免 iOS 自動放大造成版面位移 */
input, textarea, select{ font-size:16px; }